!function(){var o="popupDismiss",i=this,p={isTap:void 0,popupEvent:function(s){var t=s.target;t.getAttribute("data-toggle")!==o&&(t=n(t,'[data-toggle="'+o+'"]'));var e=function(t){if(!t||t&&""===t.trim())return[document];var e=[],s=t.split(",").map(function(t){return t.trim()});s=function(t){for(var e,s=[],i={},r=0,o=t.length;r<o&&null!==(e=t[r]);r++)i[e]||(s.push(e),i[e]=!0);return s}(s);for(var i=0,r=s.length;i<r;i++)if("document"===s[i])e.push(document);else{var o=u(document.querySelectorAll(s[i]));e=e.concat(o)}return e}(t.getAttribute("data-dismiss-scope")),i={type:s.type,namespace:t.getAttribute("data-target"),popupTrigger:t,popupTarget:document.querySelector(t.getAttribute("data-target")),toggledClass:t.getAttribute("data-toggle-class")||null,popupHandler:t.getAttribute("data-popup-handler")||null,dismissHandler:t.getAttribute("data-dismiss-handler")||null,dismissScopes:e};"true"!==i.popupTarget.getAttribute("data-isPopup")?(p.monitorTap(),i.toggledClass&&(r(i.popupTrigger,i.toggledClass),r(i.popupTarget,i.toggledClass)),i.popupTarget.setAttribute("data-isPopup","true"),i.dismissScopes.forEach(function(t){(function(t){if(0===t.length)return null;var e={on:function(t,e,s){this.namespaces||(this.namespaces={}),this.namespaces[t]=e;var i=s||!1;return this.addEventListener(t.split(".")[0],e,i),this},off:function(t){return this.removeEventListener(t.split(".")[0],this.namespaces[t]),delete this.namespaces[t],this}};t.isExtendOnOff||(t.on=Element.prototype.on=e.on,t.off=Element.prototype.off=e.off,t.isExtendOnOff=!0);return t})(t).on(i.type+"."+i.namespace,function(t){if(s!==t){var e={type:i.type,namespace:i.namespace,dismissTrigger:t.target,popupTrigger:i.popupTrigger,popupTarget:i.popupTarget,toggledClass:i.toggledClass,dismissHandler:i.dismissHandler,dismissScopes:i.dismissScopes};p.popupDismiss(e,!0)}})}),null!==i.popupHandler&&window[i.popupHandler](i.popupTarget),p.setBodyCursorInIOS("pointer")):(i.dismissTrigger=t,p.popupDismiss(i))},popupDismiss:function(e,t){!1!==p.isTap&&(!t||!a(e.dismissTrigger,e.popupTrigger)&&p.isDismissTrigger(e.dismissTrigger,e.popupTarget)&&"true"===e.popupTarget.getAttribute("data-isPopup"))&&(e.toggledClass&&(s(e.popupTrigger,e.toggledClass),s(e.popupTarget,e.toggledClass)),e.popupTarget.setAttribute("data-isPopup","false"),e.dismissScopes.forEach(function(t){t.off(e.type+"."+e.namespace,function(){p.popupDismiss(e,!0)})}),null!==e.dismissHandler&&window[e.dismissHandler](e.popupTarget),p.setBodyCursorInIOS("default"))},monitorTap:function(){p.isTap=void 0;var s={},i={};function r(t){p.isTap=!1,s.x=t.pageX,s.y=t.pageY}document.body.addEventListener("mousedown",r),document.body.addEventListener("mouseup",function t(e){i.x=e.pageX;i.y=e.pageY;Math.abs(i.x-s.x)<5&&Math.abs(i.y-s.y)<5&&(p.isTap=!0,document.body.removeEventListener("mousedown",r),document.body.removeEventListener("mouseup",t))})},isDismissTrigger:function(t,e){if(a(t,e)){var s,i=t.getAttribute("data-popup-dismiss");if("false"===i||"true"===i)return"true"===i;if(s=n(t,'[data-popup-dismiss="false"]')){var r=n(t,'[data-popup-dismiss="true"]');return!!r&&a(r,s)}}return!0},setBodyCursorInIOS:function(t){if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){var e=document.querySelector("body"),s=parseInt(e.getAttribute("popup-count")||"0",10);"pointer"===t?1==++s&&(e.style.cursor=t):"default"===t&&--s&&(e.style.cursor=t),e.setAttribute("popup-count",s.toString())}}};function r(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function s(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function n(t,e){for(;(t=t.parentElement)&&(i=e,!((s=t).matches||s.matchesSelector||s.msMatchesSelector||s.mozMatchesSelector||s.webkitMatchesSelector||s.oMatchesSelector).call(s,i)););var s,i;return t}function a(t,e){if(t===e)return!0;if(void 0===e)return!1;for(var s=[],i=t.parentNode;i!==e&&i.parentNode;){var r=i;s.push(r),i=r.parentNode}return i===e}function u(t){for(var e=[],s=0,i=t.length;s<i;s++)e[s]=t[s];return e}this.popupDismissDelegate=function(t){var e,s,i,r;e=t,s="click",i='[data-toggle="'+o+'"]',r=p.popupEvent,e.addEventListener(s,function(t){var e=t.target,s=null;(s=e.getAttribute("data-toggle")===o?e:n(e,i))&&r.call(s,t)})},this.popupDismiss=function(t){var e,s;void 0!==t?(s=[],(e=t).jquery?s=1<e.length?e.get():0===e.length?[]:[e[0]]:e instanceof window.NodeList||e instanceof NodeList||e instanceof HTMLCollection?s=Array.prototype.slice.call(e):Array.isArray(e)?s=e:e.nodeType&&(s=[e]),s).map(function(t){t.addEventListener("click",p.popupEvent)}):i.popupDismissDelegate(document.body)}}();