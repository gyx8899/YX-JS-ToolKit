{"version":3,"sources":["common.es6"],"names":[],"mappings":"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","file":"common.js","sourcesContent":["//<editor-fold desc=\"Functions: Data Process: basic data types\">\r\n/***\r\n * uniqueArray\r\n * @param {Array} sourceArray\r\n * @returns {Array}\r\n */\r\nfunction uniqueArray(sourceArray)\r\n{\r\n\tlet resultArray = [], hash = {};\r\n\tfor (let i = 0, elem, l = sourceArray.length; i < l && (elem = sourceArray[i]) !== null; i++)\r\n\t{\r\n\t\tif (!hash[elem])\r\n\t\t{\r\n\t\t\tresultArray.push(elem);\r\n\t\t\thash[elem] = true;\r\n\t\t}\r\n\t}\r\n\treturn resultArray;\r\n}\r\n\r\n/**\r\n * Capitalize the first word\r\n * @param string\r\n * @return {string}\r\n */\r\nfunction titleCase(string)\r\n{\r\n\treturn string.charAt(0).toUpperCase() + string.slice(1);\r\n}\r\n\r\n//</editor-fold>\r\n\r\n//<editor-fold desc=\"Functions: HTML Process\">\r\n/***\r\n * escapeHTML\r\n * @param {string} str\r\n * @returns {void|string}\r\n */\r\nfunction escapeHTML(str)\r\n{\r\n\tlet map = {\r\n\t\t'&': '&amp;',\r\n\t\t'<': '&lt;',\r\n\t\t'>': '&gt;',\r\n\t\t'\"': '&quot;',\r\n\t\t\"'\": '&#039;'\r\n\t};\r\n\r\n\treturn str.replace(/[&<>\"']/g, function (m) {\r\n\t\treturn map[m];\r\n\t});\r\n}\r\n\r\n/**\r\n * Initialize template with template/templateData and source data\r\n * @param {string} template\r\n * @param {object} templateData\r\n * @param {object} [sourceData], for external data process from templateData function\r\n * @returns {string}\r\n */\r\nfunction initTemplate(template, templateData, sourceData)\r\n{\r\n\tlet result = template;\r\n\tfor (let key in templateData)\r\n\t{\r\n\t\tif (templateData.hasOwnProperty(key))\r\n\t\t{\r\n\t\t\tlet dataValue = templateData[key];\r\n\t\t\t// Process source data to required data if the templateData key's value is function\r\n\t\t\tif (typeof templateData[key] === 'function')\r\n\t\t\t{\r\n\t\t\t\tdataValue = templateData[key](sourceData);\r\n\t\t\t}\r\n\t\t\tresult = result.replace(new RegExp('{{' + key + '}}', \"g\"), dataValue);\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\n/**\r\n * Render template with data and put it to target element\r\n * @param targetElement\r\n * @param template\r\n * @param sourceData\r\n * @param templateDataFn\r\n * @param [position], values=[update,beforebegin,afterbegin,beforeend,afterend], default update\r\n */\r\nfunction renderTemplate(targetElement, template, sourceData, templateDataFn, position)\r\n{\r\n\tlet resultHtml = '';\r\n\tfor (let i = 0; i < sourceData.length; i++)\r\n\t{\r\n\t\tresultHtml += initTemplate(template, templateDataFn(sourceData[i]), sourceData[i]);\r\n\t}\r\n\tif (!position || position === 'update')\r\n\t{\r\n\t\ttargetElement.innerHTML = resultHtml;\r\n\t}\r\n\telse\r\n\t{\r\n\t\ttargetElement.insertAdjacentHTML(position, resultHtml);\r\n\t}\r\n}\r\n\r\n//</editor-fold>\r\n\r\n//<editor-fold desc=\"Functions: Load resource\">\r\n/***\r\n * Load resource: support url types - js, css\r\n * @param {string} url\r\n * @param {function} [callback] - callback() after resource loaded\r\n */\r\nfunction loadResource(url, callback)\r\n{\r\n\tif (!checkResourceLoaded(url))\r\n\t{\r\n\t\twindow[getUrlTypeInfo(url).loadFn](url, callback);\r\n\t}\r\n}\r\n\r\n/***\r\n * loadResources: support url, js, css\r\n * @param {string[]} urls - an array of urls\r\n * @param {function} [callback] - callback() after url loaded\r\n */\r\nfunction loadResources(urls, callback)\r\n{\r\n\tif (urls !== null && urls !== '')\r\n\t{\r\n\t\tif (Array.isArray(urls))\r\n\t\t{\r\n\t\t\turls = urls.filter(function (url) {\r\n\t\t\t\treturn (String(url) === url && url !== '');\r\n\t\t\t});\r\n\t\t\tif (urls.length === 0)\r\n\t\t\t{\r\n\t\t\t\tcallback && callback();\r\n\t\t\t}\r\n\t\t\telse if (urls.length === 1)\r\n\t\t\t{\r\n\t\t\t\tloadResource(urls[0], callback);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (callback)\r\n\t\t\t\t{\r\n\t\t\t\t\tloadUrls(urls, callback);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\turls.map(function (url) {\r\n\t\t\t\t\t\tloadResource(url);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (String(urls) === urls)\r\n\t\t{\r\n\t\t\tloadResource(urls, callback);\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\r\n\t\tcallback && callback();\r\n\t}\r\n}\r\n\r\n/***\r\n * loadUrls with Promise if it is supported\r\n * @param {string[]} urls - an array of urls\r\n * @param {function} [callback] - callback() after url loaded\r\n */\r\nfunction loadUrls(urls, callback)\r\n{\r\n\tlet unLoadedResourcesInfo = urls.map(function (resource) {\r\n\t\tlet resourceInfo = getUrlTypeInfo(resource);\r\n\t\tresourceInfo.url = resource;\r\n\t\treturn resourceInfo;\r\n\t});\r\n\t// If support Promise, use Promise\r\n\tif (typeof Promise !== \"undefined\" && Promise.toString().indexOf(\"[native code]\") !== -1)\r\n\t{\r\n\t\tlet resourcePromise = unLoadedResourcesInfo.map(function (resourceInfo) {\r\n\t\t\treturn window[resourceInfo.loadFnPromise](resourceInfo.url);\r\n\t\t});\r\n\t\tPromise.all(resourcePromise).then(function () {\r\n\t\t\tcallback && callback();\r\n\t\t}).catch(function (error) {\r\n\t\t\tconsole.log(\"Error: in load resources! \" + error);\r\n\t\t});\r\n\t}\r\n\telse\r\n\t{\r\n\t\tunLoadedResourcesInfo.forEach(function (resourceInfo) {\r\n\t\t\twindow[resourceInfo.loadFn](resourceInfo.url);\r\n\t\t});\r\n\t\tcallback && callback();\r\n\t}\r\n}\r\n\r\n/***\r\n * loadCSS\r\n * @param {(string|string[])} url string or an array of urls\r\n * @param {function} [callback] - callback() after script loaded\r\n * @param {object} [context] - callback's context\r\n */\r\nfunction loadCSS(url, callback, context)\r\n{\r\n\tif (!url)\r\n\t\treturn;\r\n\r\n\tif (Array.isArray(url))\r\n\t{\r\n\t\t// Process the url and callback if they are array;\r\n\t\tparameterArrayToItem(function (urlParam, callbackParam) {\r\n\t\t\tloadCSS(urlParam, callbackParam);\r\n\t\t}, url, callback);\r\n\t}\r\n\telse\r\n\t{\r\n\t\tlet link = document.createElement('link');\r\n\t\tlink.rel = 'stylesheet';\r\n\t\tlink.type = 'text/css';\r\n\t\tlink.href = url;\r\n\t\tlink.onload = function () {\r\n\t\t\tcallback && (context ? context[callback]() : callback());\r\n\t\t};\r\n\t\tlink.onerror = function () {\r\n\t\t\tconsole.log(\"Error load css:\" + url);\r\n\t\t};\r\n\r\n\t\tdocument.getElementsByTagName('head')[0].appendChild(document.createComment(\" Style \" + getFileNameFromURL(url).name + \" *** CSS \"));\r\n\t\tdocument.getElementsByTagName('head')[0].appendChild(link);\r\n\t}\r\n}\r\n\r\n/***\r\n * loadScript\r\n * @param {(string|string[])} url string or an array of urls\r\n * @param {function} [callback] - callback() after script loaded\r\n * @param {object} [context] - callback's context\r\n * @param {object} info - {isAsync: [true/false], attributes: {}, libName: \"\"}\r\n */\r\nfunction loadScript(url, callback, context, info)\r\n{\r\n\tif (!url)\r\n\t\treturn;\r\n\r\n\tif (Array.isArray(url))\r\n\t{\r\n\t\t// Process the url and callback if they are array;\r\n\t\tparameterArrayToItem(function (urlParam, callbackParam) {\r\n\t\t\tloadScript(urlParam, callbackParam, context, info);\r\n\t\t}, url, callback);\r\n\t}\r\n\telse\r\n\t{\r\n\t\tlet script = document.createElement(\"script\"),\r\n\t\t\t\tisSuccess = true,\r\n\t\t\t\tlibName = info && info['libName'] ? info['libName'] : getFileNameFromURL(url).name;\r\n\t\tscript.type = \"text/javascript\";\r\n\t\tinfo && info['isAsync'] && script.setAttribute('async', '');\r\n\r\n\t\tif (info && info.attributes)\r\n\t\t{\r\n\t\t\tfor (let attr in info.attributes)\r\n\t\t\t{\r\n\t\t\t\tif (info.attributes.hasOwnProperty(attr))\r\n\t\t\t\t{\r\n\t\t\t\t\tscript.setAttribute(attr, info.attributes[attr]);\r\n\t\t\t\t\tif (attr === 'class')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tscript.setAttribute('className', info.attributes[attr]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tscript.onerror = function () {\r\n\t\t\tisSuccess = false;\r\n\t\t\tcallback && (context ? context[callback]() : callback(isSuccess));\r\n\t\t};\r\n\t\tif (script.readyState)\r\n\t\t{  //IE\r\n\t\t\tscript.onreadystatechange = function () {\r\n\t\t\t\tif (script.readyState === \"loaded\" || script.readyState === \"complete\")\r\n\t\t\t\t{\r\n\t\t\t\t\tscript.onreadystatechange = null;\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\tisSuccess && callback && (context ? context[callback]() : callback(isSuccess));\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\telse\r\n\t\t{  //Others\r\n\t\t\tscript.onload = function () {\r\n\t\t\t\tcallback && (context ? context[callback]() : callback(isSuccess));\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tscript.src = url;\r\n\r\n\t\tdocument.body.appendChild(document.createComment(\" Script \" + libName + \" *** JS \"));\r\n\t\tdocument.body.appendChild(script);\r\n\t}\r\n}\r\n\r\n/***\r\n * loadCSS with Promise\r\n * @param url\r\n * @returns {Promise}\r\n */\r\nfunction loadCSSWithPromise(url)\r\n{\r\n\treturn new Promise(function (resolve, reject) {\r\n\t\tif (!url)\r\n\t\t{\r\n\t\t\treject(new Error(\"url is null!\"));\r\n\t\t}\r\n\r\n\t\tlet link = document.createElement('link');\r\n\t\tlink.rel = 'stylesheet';\r\n\t\tlink.type = 'text/css';\r\n\t\tlink.href = url;\r\n\t\tlink.onload = function () {\r\n\t\t\tresolve();\r\n\t\t};\r\n\t\tlink.onerror = function (error) {\r\n\t\t\treject(new Error(error));\r\n\t\t};\r\n\r\n\t\tdocument.getElementsByTagName('head')[0].appendChild(document.createComment(\" Style \" + getFileNameFromURL(url).name + \" *** CSS \"));\r\n\t\tdocument.getElementsByTagName('head')[0].appendChild(link);\r\n\t});\r\n}\r\n\r\n/***\r\n * loadScript with Promise\r\n * @param url\r\n * @returns {Promise}\r\n */\r\nfunction loadScriptWithPromise(url)\r\n{\r\n\treturn new Promise(function (resolve, reject) {\r\n\t\tif (!url)\r\n\t\t{\r\n\t\t\treject(new Error(\"url is null!\"));\r\n\t\t}\r\n\r\n\t\tlet script = document.createElement(\"script\");\r\n\t\tscript.type = \"text/javascript\";\r\n\r\n\t\tif (script.readyState)\r\n\t\t{  //IE\r\n\t\t\tscript.onreadystatechange = function () {\r\n\t\t\t\tif (script.readyState === \"loaded\" || script.readyState === \"complete\")\r\n\t\t\t\t{\r\n\t\t\t\t\tscript.onreadystatechange = null;\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\telse\r\n\t\t{  //Others\r\n\t\t\tscript.onload = function () {\r\n\t\t\t\tresolve();\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tscript.src = url;\r\n\r\n\t\tdocument.body.appendChild(document.createComment(\" Script \" + getFileNameFromURL(url).name + \" *** JS \"));\r\n\t\tdocument.body.appendChild(script);\r\n\t});\r\n}\r\n\r\n/***\r\n * Ajax request: dependency jQuery\r\n * @param {string} url\r\n * @param {function} callback\r\n * @param {object} context: callback's context\r\n */\r\nfunction getFileContentWithAjax(url, callback, context)\r\n{\r\n\t$.ajax({\r\n\t\turl: url,\r\n\t\tsuccess: function (data) {\r\n\t\t\tcallback && (context ? context[callback](data) : callback(data));\r\n\t\t}\r\n\t});\r\n}\r\n\r\n/***\r\n * Use XDomainRequest when browser <= IE9, otherwise use XMLHttpRequest(not support < IE9);\r\n * @param {string} url\r\n * @param {function} callback\r\n * @param {object} context: callback's context\r\n */\r\nfunction getFileContent(url, callback, context)\r\n{\r\n\tif (document.documentMode <= 9 && window.XDomainRequest)\r\n\t{\r\n\t\txdrGetRequest(url, callback, context)\r\n\t}\r\n\telse\r\n\t{\r\n\t\txmlHTTPGetRequest(url, callback, context);\r\n\t}\r\n}\r\n\r\n/***\r\n * xdrGetRequest: send get request in IE <= 9\r\n * @param {string} url\r\n * @param {function} callback\r\n * @param {object} context: callback's context\r\n *\r\n * XDomainRequest is an implementation of HTTP access control (CORS) that worked in Internet Explorer 8 and 9.\r\n * It was removed in Internet Explorer 10 in favor of using XMLHttpRequest with proper CORS;\r\n * https://developer.mozilla.org/zh-CN/docs/Web/API/XDomainRequest\r\n */\r\nfunction xdrGetRequest(url, callback, context)\r\n{\r\n\tlet xdr = new XDomainRequest();\r\n\tif (xdr)\r\n\t{\r\n\t\txdr.onload = function () {\r\n\t\t\tcallback && (context ? context[callback](xdr.responseText) : callback(xdr.responseText));\r\n\t\t};\r\n\t\txdr.onerror = function () {\r\n\t\t\t/* error handling here */\r\n\t\t};\r\n\t\txdr.open('GET', url);\r\n\t\txdr.send();\r\n\t}\r\n}\r\n\r\n/***\r\n * XMLHttpRequest: send get request in IE >= 10, or other browsers\r\n * @param {string} url\r\n * @param {function} callback\r\n * @param {object} context: callback's context\r\n */\r\nfunction xmlHTTPGetRequest(url, callback, context)\r\n{\r\n\tlet request = new XMLHttpRequest();\r\n\trequest.open('GET', url, true);\r\n\trequest.onload = function () {\r\n\t\tif (request.status >= 200 && request.status < 400)\r\n\t\t{\r\n\t\t\t// Success\r\n\t\t\tcallback && (context ? context[callback](request.responseText) : callback(request.responseText));\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// We reached our target server, but it returned an error\r\n\t\t}\r\n\t};\r\n\trequest.onerror = function () {\r\n\t\t// There was a connection error of some sort\r\n\t};\r\n\trequest.send();\r\n}\r\n\r\n//</editor-fold>\r\n\r\n//<editor-fold desc=\"Functions: Regular expression\">\r\n/***\r\n * regExpG\r\n * @param expStr\r\n * @returns {RegExp}\r\n */\r\nfunction regExpG(expStr)\r\n{\r\n\treturn new RegExp(expStr, \"g\");\r\n}\r\n\r\n/***\r\n * isURL\r\n * @param url\r\n * @returns {boolean}\r\n */\r\nfunction isURL(url)\r\n{\r\n\tlet expression = /(((http|ftp|https):\\/\\/)?([\\w\\-_]+(\\.(?!(\\d)+)[\\w\\-_]+))+([\\w\\-\\.,@?^=%&amp;:/~\\+#]*[\\w\\-\\@?^=%&amp;/~\\+#])?)|(\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*)/g;\r\n\treturn (new RegExp(expression)).test(url);\r\n}\r\n\r\n//</editor-fold>\r\n\r\n//<editor-fold desc=\"Functions: Process URL\">\r\n/***\r\n * getFileNameFromURL\r\n * @param {string} url\r\n * @returns {object} {name: '', simpleBaseName: '', extensionName: '', baseName: ''}\r\n */\r\nfunction getFileNameFromURL(url)\r\n{\r\n\tlet fileNameSplit = url.split('/').pop().split('#')[0].split('?')[0].split('.');\r\n\treturn {\r\n\t\tname: fileNameSplit.join('.'),\r\n\t\tsimpleBaseName: fileNameSplit[0],\r\n\t\textensionName: fileNameSplit.length > 1 ? fileNameSplit[fileNameSplit.length - 1] : '',\r\n\t\tbaseName: fileNameSplit.length > 1 ? fileNameSplit.splice(0, fileNameSplit.length - 1).join('.') : fileNameSplit[0],\r\n\t};\r\n}\r\n\r\n/***\r\n * checkResourceLoaded\r\n * @param {string} url\r\n * @returns {boolean}\r\n */\r\nfunction checkResourceLoaded(url)\r\n{\r\n\tlet type = getUrlTypeInfo(url),\r\n\t\t\ttypeSelector = type['tagName'] || '[src]',\r\n\t\t\tallUrls = Array.prototype.slice.call(document.querySelectorAll(typeSelector))\r\n\t\t\t\t\t.map(function (scriptElement) {\r\n\t\t\t\t\t\treturn scriptElement[type['urlAttrName']];\r\n\t\t\t\t\t});\r\n\treturn allUrls.indexOf(url) !== -1;\r\n}\r\n\r\n/***\r\n * getUrlTypeInfo\r\n * @param {string} url\r\n * @returns {object}\r\n */\r\nfunction getUrlTypeInfo(url)\r\n{\r\n\t// Current only support js and css resources;\r\n\tlet fileExtensionName = getFileNameFromURL(url).extensionName;\r\n\tif (fileExtensionName)\r\n\t{\r\n\t\tlet urlType = {\r\n\t\t\t'js': {\r\n\t\t\t\tname: 'js',\r\n\t\t\t\ttagName: 'script',\r\n\t\t\t\turlAttrName: 'src',\r\n\t\t\t\tloadFn: 'loadScript',\r\n\t\t\t\tloadFnPromise: 'loadScriptWithPromise'\r\n\t\t\t},\r\n\t\t\t'css': {\r\n\t\t\t\tname: 'css',\r\n\t\t\t\ttagName: 'link',\r\n\t\t\t\turlAttrName: 'href',\r\n\t\t\t\tloadFn: 'loadCSS',\r\n\t\t\t\tloadFnPromise: 'loadCSSWithPromise'\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn urlType[fileExtensionName];\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/***\r\n * getCurrentScriptPath in Page\r\n * @param {string} scriptName\r\n * @returns {null|string}\r\n */\r\nfunction getCurrentScriptPath(scriptName)\r\n{\r\n\tlet scripts = document.getElementsByTagName(\"script\");\r\n\r\n\tfor (let i = 0; i < scripts.length; i++)\r\n\t{\r\n\t\tlet script = scripts.item(i);\r\n\r\n\t\tif (script.src && script.src.match(scriptName))\r\n\t\t{\r\n\t\t\treturn script.src;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/***\r\n * getQueryParamValue\r\n * @param param\r\n * @returns {*}\r\n */\r\nfunction getQueryParamValue(param)\r\n{\r\n\tlet query = window.location.search.substring(1);\r\n\tlet queryParams = query.split(\"&\");\r\n\tfor (let i = 0; i < queryParams.length; i++)\r\n\t{\r\n\t\tlet queryParam = queryParams[i].split(\"=\");\r\n\t\tif (queryParam[0] === param)\r\n\t\t{\r\n\t\t\treturn queryParam[1];\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\n/***\r\n * getUrlQueryParams\r\n * @returns {object}\r\n */\r\nfunction getUrlQueryParams()\r\n{\r\n\tlet query = {},\r\n\t\t\tqueryParams = window.location.search.substring(1).split(\"&\");\r\n\tfor (let i = 0; i < queryParams.length; i++)\r\n\t{\r\n\t\tlet queryParam = queryParams[i].split(\"=\");\r\n\t\tquery[queryParam[0]] = queryParam[1];\r\n\t}\r\n\treturn query;\r\n}\r\n\r\n/***\r\n * getRootPath\r\n * @returns {string}\r\n */\r\nfunction getRootPath()\r\n{\r\n\tlet href = window.document.location.href,\r\n\t\t\tpathName = window.document.location.pathname,\r\n\t\t\tlocalhostPath = href.substring(0, href.indexOf(pathName)),\r\n\t\t\tprojectName = pathName.substring(0, pathName.substr(1).lastIndexOf('/') + 1);\r\n\treturn (localhostPath + projectName);\r\n}\r\n\r\n//</editor-fold>\r\n\r\n//<editor-fold desc=\"Functions: Tools\">\r\n/**\r\n * Tools for processing function who has parameter array\r\n * @param fn\r\n * @param param1\r\n * @param param2\r\n */\r\nfunction parameterArrayToItem(fn, param1, param2)\r\n{\r\n\tlet param2IsArray = Array.isArray(param2),\r\n\t\t\tparam2ArrayLength = param2IsArray && param2.length || 0;\r\n\tfor (let i = 0, length = param1.length; i < length; i++)\r\n\t{\r\n\t\tlet param2Item = (param2IsArray && i < param2ArrayLength) ? param2[i] : null;\r\n\t\tfn && fn(param1[i], param2Item);\r\n\t}\r\n}\r\n\r\n/**\r\n * Throttle, specially in onResize event function;\r\n * @param method\r\n * @param context\r\n * @param {number} [timeout]\r\n */\r\nfunction throttle(method, context, timeout)\r\n{\r\n\ttimeout = (timeout || timeout === 0) ? timeout : 100;\r\n\tif (method.tId)\r\n\t{\r\n\t\tclearTimeout(method.tId);\r\n\t}\r\n\tmethod.tId = setTimeout(function () {\r\n\t\tmethod.call(context);\r\n\t}, timeout);\r\n}\r\n\r\n/**\r\n * Custom console log modal in function\r\n * @param fnArguments\r\n */\r\nfunction consoleLog(fnArguments)\r\n{\r\n\tlet typeStyle = [\r\n\t\t'font-size: 14px; color: #8665D5',\r\n\t\t'font-size: 14px; color: #406AD5',\r\n\t\t'font-size: 14px; color: #E9AC32',\r\n\t\t'font-size: 14px; color: #3AC1D9',\r\n\t\t'font-size: 14px; color: #FF7979',\r\n\t\t'font-size: 14px; color: #39D084',\r\n\t\t'font-size: 14px; color: #FF8E66',\r\n\t\t'font-size: 14px; color: #44B1E6',\r\n\t\t'font-size: 14px; color: #9e5648',\r\n\t\t'font-size: 14px; color: #406ad5',\r\n\t\t'font-size: 14px; color: #purple',\r\n\t\t'font-size: 14px; color: #red',\r\n\t\t'font-size: 14px; color: #teal',\r\n\t\t'font-size: 14px; color: #yellow'\r\n\t];\r\n\tif (!window.consoleLogTypes)\r\n\t{\r\n\t\twindow.consoleLogTypes = {};\r\n\t}\r\n\tif (window.console && window.debug !== false)\r\n\t{\r\n\t\tlet fnName = fnArguments.callee ? fnArguments.callee.name : '',\r\n\t\t\t\tfnArgumentsArray = Array.prototype.slice.call(fnArguments, 0),\r\n\t\t\t\tfnArgumentsString = getArrayString(fnArgumentsArray),\r\n\t\t\t\targumentsArray = Array.prototype.slice.call(arguments, 0),\r\n\t\t\t\tsurplusArgumentString = argumentsArray.length > 1 && argumentsArray.shift() && getArrayString(argumentsArray);\r\n\t\tif (!window.consoleLogTypes[fnName])\r\n\t\t{\r\n\t\t\twindow.consoleLogTypes[fnName] = {\r\n\t\t\t\ttypeCount: 0,\r\n\t\t\t\ttypeInfo: {}\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (!window.consoleLogTypes[fnName].typeInfo[argumentsArray[0]])\r\n\t\t{\r\n\t\t\twindow.consoleLogTypes[fnName].typeInfo[argumentsArray[0]] = typeStyle[window.consoleLogTypes[fnName].typeCount];\r\n\t\t\twindow.consoleLogTypes[fnName].typeCount++;\r\n\t\t}\r\n\t\tif (window.consoleLogTypes.lastType !== fnName)\r\n\t\t{\r\n\t\t\twindow.console.groupEnd();\r\n\t\t\twindow.console.group(fnName);\r\n\t\t\twindow.consoleLogTypes.lastType = fnName;\r\n\t\t}\r\n\t\twindow.console.log('%c%s', window.consoleLogTypes[fnName].typeInfo[argumentsArray[0]], fnName + ': (' + fnArgumentsString + ') ' + surplusArgumentString);\r\n\t}\r\n}\r\n\r\n/**\r\n * Get array item string which spilt with ',';\r\n * @param array\r\n * @returns {string}\r\n */\r\nfunction getArrayString(array)\r\n{\r\n\treturn array.map(function (arrayItem) {\r\n\t\tif (Array.isArray(arrayItem))\r\n\t\t{\r\n\t\t\tarrayItem = '[' + arguments.callee(arrayItem) + ']';\r\n\t\t}\r\n\t\telse if (typeof arrayItem === 'object')\r\n\t\t{\r\n\t\t\tarrayItem = JSON.stringify(arrayItem);\r\n\t\t}\r\n\t\treturn arrayItem.toString();\r\n\t}).join(',');\r\n}\r\n\r\n/**\r\n * Dynamic set callback function in window\r\n * @param typeName\r\n * @returns {*}\r\n */\r\nfunction setCallback(typeName)\r\n{\r\n\tlet typeCallback = getCallbackName(typeName);\r\n\tif (!window[typeCallback])\r\n\t{\r\n\t\twindow[typeCallback] = function (data) {\r\n\t\t\twindow[typeName] = data;\r\n\t\t};\r\n\t\treturn typeCallback;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/**\r\n * getCallbackName\r\n * @param typeName\r\n * @returns {string}\r\n */\r\nfunction getCallbackName(typeName)\r\n{\r\n\treturn typeName + \"Callback\";\r\n}\r\n\r\n/**\r\n * deepExtend - deep copy with out jQuery\r\n * @param out\r\n * @returns {*|{}}\r\n */\r\nfunction deepExtend(out) // arguments: (source, source1, source2, ...)\r\n{\r\n\tout = out || {};\r\n\r\n\tfor (let i = 1; i < arguments.length; i++)\r\n\t{\r\n\t\tlet obj = arguments[i];\r\n\r\n\t\tif (!obj)\r\n\t\t\tcontinue;\r\n\r\n\t\tfor (let key in obj)\r\n\t\t{\r\n\t\t\tif (obj.hasOwnProperty(key))\r\n\t\t\t{\r\n\t\t\t\tif (typeof obj[key] === 'object'\r\n\t\t\t\t\t\t&& obj[key] !== null\r\n\t\t\t\t\t\t&& !Array.isArray(obj[key])\r\n\t\t\t\t\t\t&& !(obj[key] instanceof Date)\r\n\t\t\t\t\t\t&& !(obj[key] === 'function'))\r\n\t\t\t\t{\r\n\t\t\t\t\tout[key] = deepExtend(out[key], obj[key]);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\tout[key] = obj[key];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n}\r\n\r\n//</editor-fold>\r\n\r\n//<editor-fold desc=\"Functions: Elements operation\">\r\n/**\r\n * getElements\r\n * @param elements\r\n * @returns {Array}\r\n */\r\nfunction getElements(elements)\r\n{\r\n\tlet resultElement = [];\r\n\tif (elements.jquery)\r\n\t{\r\n\t\tresultElement = elements.length > 1 ? elements.get() : [elements[0]];\r\n\t}\r\n\telse if (elements instanceof window.NodeList || elements instanceof NodeList || elements instanceof HTMLCollection)\r\n\t{\r\n\t\tresultElement = Array.prototype.slice.call(elements);\r\n\t}\r\n\telse if (Array.isArray(elements))\r\n\t{\r\n\t\tresultElement = elements;\r\n\t}\r\n\telse if (elements.nodeType)\r\n\t{\r\n\t\tresultElement = [elements];\r\n\t}\r\n\treturn resultElement;\r\n}\r\n\r\n/**\r\n * getSelectorsElements\r\n * @param selectorString\r\n * @returns {*}\r\n */\r\nfunction getSelectorsElements(selectorString)\r\n{\r\n\tif (!selectorString || (selectorString && selectorString.trim() === ''))\r\n\t{\r\n\t\treturn [document];\r\n\t}\r\n\tlet selectorsElements = [],\r\n\t\t\tselectorsArray = selectorString.split(',').map(function (selectorStringItem) {\r\n\t\t\t\treturn selectorStringItem.trim();\r\n\t\t\t});\r\n\tselectorsArray = uniqueArray(selectorsArray);\r\n\tfor (let i = 0, l = selectorsArray.length; i < l; i++)\r\n\t{\r\n\t\tif (selectorsArray[i] === 'document')\r\n\t\t{\r\n\t\t\tselectorsElements.push(document);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tlet scopeNodeList = convertNodeListToArray(document.querySelectorAll(selectorsArray[i]));\r\n\t\t\tselectorsElements = selectorsElements.concat(scopeNodeList);\r\n\t\t}\r\n\t}\r\n\treturn selectorsElements;\r\n}\r\n\r\n/**\r\n * findParent\r\n * @param element\r\n * @param selector\r\n * @returns {*}\r\n */\r\nfunction findParent(element, selector)\r\n{\r\n\twhile ((element = element.parentElement) && !matches(element, selector)) {}\r\n\treturn element;\r\n}\r\n\r\n/**\r\n * matches\r\n * @param el\r\n * @param selector\r\n * @returns {boolean | *}\r\n */\r\nfunction matches(el, selector)\r\n{\r\n\treturn (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector).call(el, selector);\r\n}\r\n\r\n/***\r\n * Get element's closet class parent element\r\n * @param {element} element\r\n * @param {string} className\r\n * @returns {element}\r\n */\r\nfunction closet(element, className)\r\n{\r\n\tlet closetElement = null;\r\n\tif (hasClass(element, className))\r\n\t{\r\n\t\tclosetElement = element;\r\n\t}\r\n\telse\r\n\t{\r\n\t\tclosetElement = findParent(element, '.' + className);\r\n\t}\r\n\treturn closetElement;\r\n}\r\n\r\n/***\r\n * Check element has parentElement\r\n * @param el\r\n * @param parentElement\r\n * @returns {boolean}\r\n */\r\nfunction hasCloset(el, parentElement)\r\n{\r\n\tif (el === parentElement)\r\n\t{\r\n\t\treturn true;\r\n\t}\r\n\tif (parentElement === undefined)\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\r\n\tlet parents = [], p = el.parentNode;\r\n\twhile (p !== parentElement && p.parentNode)\r\n\t{\r\n\t\tlet o = p;\r\n\t\tparents.push(o);\r\n\t\tp = o.parentNode;\r\n\t}\r\n\treturn p === parentElement;\r\n}\r\n\r\n/***\r\n * Convert JS selector elements to array\r\n * @param {elements} nodeList\r\n * @returns {Array}\r\n */\r\nfunction convertNodeListToArray(nodeList)\r\n{\r\n\tlet resultArray = [];\r\n\tfor (let i = 0, l = nodeList.length; i < l; i++)\r\n\t{\r\n\t\tresultArray[i] = nodeList[i];\r\n\t}\r\n\treturn resultArray;\r\n}\r\n\r\n/***\r\n *\r\n * Copy html element to clipboard\r\n * @param {element} element - html element\r\n */\r\nfunction copyElementToClipboard(element)\r\n{\r\n\tlet selection = window.getSelection(),    // Save the selection.\r\n\t\t\trange = document.createRange(),\r\n\t\t\tisSuccess = false;\r\n\trange.selectNodeContents(element);\r\n\tselection.removeAllRanges();          // Remove all ranges from the selection.\r\n\tselection.addRange(range);            // Add the new range.\r\n\r\n\tisSuccess = document.execCommand('copy');\r\n\twindow.getSelection().removeAllRanges();\r\n\treturn isSuccess;\r\n}\r\n\r\n/**\r\n * Insert style to head\r\n * @param {string} cssText - style string\r\n */\r\nfunction insertStyleToHead(cssText)\r\n{\r\n\tlet head = document.head || document.getElementsByTagName('head')[0],\r\n\t\t\tstyle = document.createElement('style');\r\n\r\n\tstyle.type = 'text/css';\r\n\tif (style.styleSheet)\r\n\t{\r\n\t\tstyle.styleSheet.cssText = cssText;\r\n\t}\r\n\telse\r\n\t{\r\n\t\tstyle.appendChild(document.createTextNode(cssText));\r\n\t}\r\n\r\n\thead.appendChild(style);\r\n}\r\n\r\n/**\r\n * Create one html tag element with tagInfo\r\n * @param {string} tagName - html tag name\r\n * @param {object} tagInfo - tag's attributes and style object, such as { attr: {}, style: {} }\r\n * @return {element} html tag element.\r\n */\r\nfunction createTagElement(tagName, tagInfo)\r\n{\r\n\tlet tagElement = document.createElement(tagName);\r\n\r\n\tObject.keys(tagInfo.attr).forEach(function (key) {\r\n\t\ttagElement.setAttribute(key, tagInfo.attr[key]);\r\n\t});\r\n\r\n\tObject.keys(tagInfo.style).forEach(function (key) {\r\n\t\ttagElement.style[key] = tagInfo.style[key];\r\n\t});\r\n\r\n\treturn tagElement;\r\n}\r\n\r\n//</editor-fold>\r\n\r\n//<editor-fold desc=\"Functions: Page operation\">\r\n/**\r\n * scrollListToIndex\r\n * @param listFolder\r\n * @param index\r\n * @param toTopIndex\r\n * @param duration\r\n */\r\nfunction scrollListToIndex(listFolder, index, toTopIndex, duration)\r\n{\r\n\tif (index === 0)\r\n\t{\r\n\t\tscrollTo(listFolder, 0, duration);\r\n\t}\r\n\telse\r\n\t{\r\n\t\tlet listItems = listFolder.childNodes,\r\n\t\t\t\tscrollOffset = 0,\r\n\t\t\t\tcontentHeight = 0,\r\n\t\t\t\tscrollToCenter = 0;\r\n\t\tduration = (duration === undefined ? 500 : duration);\r\n\t\tfor (let i = 0, l = listItems.length; i < l; i++)\r\n\t\t{\r\n\t\t\tlet listItemHeight = listItems[i].offsetHeight;\r\n\t\t\tif (i < index)\r\n\t\t\t{\r\n\t\t\t\tscrollOffset += listItemHeight;\r\n\t\t\t\tif (i > toTopIndex - 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tscrollToCenter += listItems[i - toTopIndex].offsetHeight;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcontentHeight += listItemHeight;\r\n\t\t}\r\n\t\tscrollOffset = scrollToCenter;\r\n\t\tif (scrollOffset + listFolder.offsetHeight > contentHeight)\r\n\t\t{\r\n\t\t\tscrollOffset = contentHeight - listFolder.offsetHeight;\r\n\t\t}\r\n\t\tscrollTo(listFolder, scrollOffset, duration);\r\n\t}\r\n}\r\n\r\n/**\r\n * scrollTo\r\n * @param element\r\n * @param to\r\n * @param duration\r\n */\r\nfunction scrollTo(element, to, duration)\r\n{\r\n\tif (duration <= 0) return;\r\n\tlet difference = to - element.scrollTop;\r\n\tlet perTick = difference / duration * 10;\r\n\r\n\tsetTimeout(function () {\r\n\t\telement.scrollTop = element.scrollTop + perTick;\r\n\t\tif (element.scrollTop === to) return;\r\n\t\tscrollTo(element, to, duration - 10);\r\n\t}, 10);\r\n}\r\n\r\n/**\r\n * addChildElement\r\n * @param targetElement\r\n * @param addedElement\r\n * @param position\r\n * @return resultAddedElement\r\n */\r\nfunction addElement(targetElement, addedElement, position)\r\n{\r\n\tlet resultAddedElement = null;\r\n\tswitch (position && position.toLowerCase())\r\n\t{\r\n\t\tcase 'prepend':\r\n\t\t\tresultAddedElement = targetElement.insertBefore(addedElement, targetElement.firstChild);\r\n\t\t\tbreak;\r\n\t\tcase 'insertbefore':\r\n\t\t\ttargetElement.insertAdjacentHTML('beforebegin', addedElement.outerHTML);\r\n\t\t\tresultAddedElement = targetElement.previousSibling;\r\n\t\t\tbreak;\r\n\t\tcase 'insertafter':\r\n\t\t\ttargetElement.insertAdjacentHTML('afterend', addedElement.outerHTML);\r\n\t\t\tresultAddedElement = targetElement.nextSibling;\r\n\t\t\tbreak;\r\n\t\tdefault: //'append'\r\n\t\t\tresultAddedElement = targetElement.appendChild(addedElement);\r\n\t}\r\n\treturn resultAddedElement;\r\n}\r\n\r\n//</editor-fold>\r\n\r\n//<editor-fold desc=\"Functions: Operator Class without jQuery\">\r\n/**\r\n * hasClass\r\n * @param element\r\n * @param className\r\n * @returns {boolean}\r\n */\r\nfunction hasClass(element, className)\r\n{\r\n\tif (element.classList)\r\n\t\treturn element.classList.contains(className);\r\n\telse\r\n\t\treturn new RegExp('(^| )' + className + '( |$)', 'gi').test(element.className);\r\n}\r\n\r\n/**\r\n * addClass\r\n * @param element\r\n * @param className\r\n */\r\nfunction addClass(element, className)\r\n{\r\n\tif (!hasClass(element, className))\r\n\t{\r\n\t\tif (element.classList)\r\n\t\t\telement.classList.add(className);\r\n\t\telse\r\n\t\t\telement.className += ' ' + className;\r\n\t}\r\n}\r\n\r\n/**\r\n * removeClass\r\n * @param element\r\n * @param className\r\n */\r\nfunction removeClass(element, className)\r\n{\r\n\tif (hasClass(element, className))\r\n\t{\r\n\t\tif (element.classList)\r\n\t\t\telement.classList.remove(className);\r\n\t\telse\r\n\t\t\telement.className = element.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\r\n\t}\r\n}\r\n\r\n/**\r\n * toggleClass\r\n * @param element\r\n * @param className\r\n */\r\nfunction toggleClass(element, className)\r\n{\r\n\tif (hasClass(element, className))\r\n\t{\r\n\t\tremoveClass(element, className);\r\n\t}\r\n\telse\r\n\t{\r\n\t\taddClass(element, className);\r\n\t}\r\n}\r\n\r\n//</editor-fold>\r\n\r\n//<editor-fold desc=\"Functions: Event operation\">\r\n\r\n/**\r\n * delegate element event\r\n * @param element\r\n * @param eventName\r\n * @param selector\r\n * @param handler\r\n */\r\nfunction delegate(element, eventName, selector, handler)\r\n{\r\n\tlet possibleTargets = element.querySelectorAll(selector);\r\n\telement.addEventListener(eventName, listenerHandler);\r\n\r\n\tfunction listenerHandler(event)\r\n\t{\r\n\t\tlet target = event.target;\r\n\r\n\t\tfor (let i = 0, l = possibleTargets.length; i < l; i++)\r\n\t\t{\r\n\t\t\tlet el = target,\r\n\t\t\t\t\tp = possibleTargets[i];\r\n\r\n\t\t\twhile (el && el !== element)\r\n\t\t\t{\r\n\t\t\t\tif (el === p)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn handler.call(p, event);\r\n\t\t\t\t}\r\n\t\t\t\tel = el.parentNode;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * bindClickIgnoreDrag\r\n * @param elements\r\n * @param callback\r\n * @param isBind\r\n */\r\nfunction bindClickIgnoreDrag(elements, callback, isBind)\r\n{\r\n\tlet eventListenerName = isBind !== false ? 'on' : 'off',\r\n\t\t\tmouseDownX = 0,\r\n\t\t\tmouseDownY = 0;\r\n\r\n\t[].forEach.call(elements, function (element) {\r\n\t\textendOnOff(element)[eventListenerName]('mousedown', mouseDownHandler);\r\n\t});\r\n\r\n\tfunction mouseDownHandler(event)\r\n\t{\r\n\t\tmouseDownX = event.pageX;\r\n\t\tmouseDownY = event.pageY;\r\n\t\tevent.target.addEventListener('mouseup', mouseUpMoveHandler);\r\n\t\tevent.target.addEventListener('mousemove', mouseUpMoveHandler);\r\n\t}\r\n\r\n\tfunction mouseUpMoveHandler(event)\r\n\t{\r\n\t\tif (event.type === 'mouseup' && event.which <= 1) //only for left key\r\n\t\t{\r\n\t\t\tcallback(event);\r\n\t\t}\r\n\t\telse if (event.type === 'mousemove' && event.pageX === mouseDownX && event.pageY === mouseDownY)\r\n\t\t{\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tevent.target.removeEventListener('mouseup', mouseUpMoveHandler);\r\n\t\tevent.target.removeEventListener('mousemove', mouseUpMoveHandler);\r\n\t}\r\n}\r\n\r\n/**\r\n * triggerEvent\r\n * @param element\r\n * @param eventName\r\n * @param data\r\n */\r\nfunction triggerEvent(element, eventName, data)\r\n{\r\n\tlet event = null;\r\n\tif (window.CustomEvent)\r\n\t{\r\n\t\tevent = new CustomEvent(eventName, {detail: data});\r\n\t}\r\n\telse\r\n\t{\r\n\t\tevent = document.createEvent('CustomEvent');\r\n\t\tevent.initCustomEvent(eventName, true, true, data);\r\n\t}\r\n\r\n\telement.dispatchEvent(event);\r\n}\r\n\r\n/**\r\n * Extend on/off methods\r\n * @param el: element\r\n * @returns {*}\r\n */\r\nfunction extendOnOff(el)\r\n{\r\n\tif (el.length === 0)\r\n\t\treturn null;\r\n\tlet events = {\r\n\t\ton: function (event, callback, opts) {\r\n\t\t\tif (!this.namespaces) // save the namespaces on the DOM element itself\r\n\t\t\t\tthis.namespaces = {};\r\n\r\n\t\t\tthis.namespaces[event] = callback;\r\n\t\t\tlet options = opts || false;\r\n\r\n\t\t\tthis.addEventListener(event.split('.')[0], callback, options);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\toff: function (event) {\r\n\t\t\tthis.removeEventListener(event.split('.')[0], this.namespaces[event]);\r\n\t\t\tdelete this.namespaces[event];\r\n\t\t\treturn this;\r\n\t\t}\r\n\t};\r\n\r\n\t// Extend the DOM with these above custom methods\r\n\tif (!el.isExtendOnOff)\r\n\t{\r\n\t\tel.on = Element.prototype.on = events.on;\r\n\t\tel.off = Element.prototype.off = events.off;\r\n\t\tel.isExtendOnOff = true;\r\n\t}\r\n\treturn el;\r\n}\r\n\r\n/**\r\n * mouseTouchTrack\r\n * @param element\r\n * @param infoCallback\r\n */\r\nfunction mouseTouchTrack(element, infoCallback)\r\n{\r\n\tlet touchStartBeginTime = 0,\r\n\t\t\tlastEventType = '';\r\n\r\n\telement.onclick = trackEvent;\r\n\telement.ontouchstart = trackEvent;\r\n\telement.ontouchend = trackEvent;\r\n\telement.ontouchmove = trackEvent;\r\n\telement.onmousedown = trackEvent;\r\n\telement.onmouseenter = trackEvent;\r\n\telement.onmouseleave = trackEvent;\r\n\telement.onmousemove = trackEvent;\r\n\telement.onmouseout = trackEvent;\r\n\telement.onmouseover = trackEvent;\r\n\telement.onmouseup = trackEvent;\r\n\r\n\tfunction trackEvent(event)\r\n\t{\r\n\t\tif (event.type === \"touchstart\")\r\n\t\t{\r\n\t\t\ttouchStartBeginTime = Date.now();\r\n\t\t}\r\n\t\tif (event.type !== lastEventType)\r\n\t\t{\r\n\t\t\tinfoCallback = infoCallback ? infoCallback : console.log;\r\n\t\t\tinfoCallback(arguments, event.type, Date.now() - touchStartBeginTime);\r\n\r\n\t\t\tlastEventType = event.type;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n//</editor-fold>\r\n\r\n//<editor-fold desc=\"Plugins: Common\">\r\n/**\r\n * Plugins: Dictionary\r\n */\r\n(function () {\r\n\t\"use strict\";\r\n\r\n\tfunction Dictionary()\r\n\t{\r\n\t\tthis._size = 0;\r\n\t\tthis.dataStore = Object.create(null);\r\n\t}\r\n\r\n\tDictionary.prototype.isEmpty = function () {\r\n\t\treturn this._size === 0;\r\n\t};\r\n\r\n\tDictionary.prototype.size = function () {\r\n\t\treturn this._size;\r\n\t};\r\n\r\n\tDictionary.prototype.clear = function () {\r\n\t\tfor (let key in this.dataStore)\r\n\t\t{\r\n\t\t\tif (this.dataStore.hasOwnProperty(key))\r\n\t\t\t{\r\n\t\t\t\tdelete this.dataStore[key];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._size = 0;\r\n\t};\r\n\r\n\tDictionary.prototype.add = function (key, value) {\r\n\t\tthis.dataStore[key] = value;\r\n\t\tthis._size++;\r\n\t};\r\n\r\n\tDictionary.prototype.find = function (key) {\r\n\t\treturn this.dataStore[key];\r\n\t};\r\n\r\n\tDictionary.prototype.count = function () {\r\n\t\tlet n = 0;\r\n\t\tfor (let key in this.dataStore)\r\n\t\t{\r\n\t\t\tif (this.dataStore.hasOwnProperty(key))\r\n\t\t\t{\r\n\t\t\t\tn++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn n;\r\n\t};\r\n\r\n\tDictionary.prototype.remove = function (key) {\r\n\t\tdelete this.dataStore[key];\r\n\t\tthis._size--;\r\n\t};\r\n\r\n\tDictionary.prototype.showAll = function () {\r\n\t\tfor (let key in this.dataStore)\r\n\t\t{\r\n\t\t\tif (this.dataStore.hasOwnProperty(key))\r\n\t\t\t{\r\n\t\t\t\tconsole.log(key + \"->\" + this.dataStore[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n})();\r\n\r\n//</editor-fold>"]}