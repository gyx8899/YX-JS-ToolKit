{"version":3,"sources":["webpack://PopupDismiss/webpack/bootstrap","webpack://PopupDismiss/./scripts/popupDismiss.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Util","el","className","classList","add","remove","replace","RegExp","element","selector","matches","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","parentElement","undefined","parents","parentNode","push","selectorString","trim","document","selectorsElements","selectorsArray","split","map","selectorStringItem","uniqueArray","length","scopeNodeList","slice","querySelectorAll","concat","sourceArray","elem","resultArray","hash","events","event","callback","opts","this","namespaces","options","addEventListener","removeEventListener","isExtendOnOff","on","Element","off","elements","resultElement","jquery","window","NodeList","HTMLCollection","Array","isArray","filter","nodeType","url","query","queryParams","indexOf","location","search","substring","queryParam","scriptName","allScripts","getElementsByTagName","script","item","src","match","PopupDismiss","_this","isDelegated","arguments","_classCallCheck","isTap","attr","dataToggle","dataTarget","dataDismissScope","dataToggleClass","dataPopupHandler","dataDismissHandler","dataIsPopup","dataPopupDismiss","popupEvent","bind","initDelegate","body","getElements","init","initElement","forEach","getAttribute","setAttribute","delegate","eventName","handler","_this2","target","popupDismissElement","findParent","triggerElement","targetElement","subSelector","popupTarget","querySelector","popupTrigger","that","dismissScopes","getSelectorsElements","eventData","type","namespace","Date","getTime","toggledClass","popupHandler","dismissHandler","monitorTap","addClass","scope","extendOnOff","newEvent","newEventData","dismissTrigger","dismiss","setBodyCursorInIOS","isTrigger","_this3","hasClosest","isDismissTrigger","removeClass","start","end","mouseDown","x","pageX","y","pageY","mouseUp","Math","abs","child","parent","parentDismissFalse","parentDismissTrue","val","test","navigator","userAgent","popupCount","parseInt","style","cursor","toString","popupDismiss","console","warn","popupDismissDelegate","currentScript","getScriptByName","initPopupDismiss","getUrlQueryParams","readyState"],"mappings":"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","file":"popupDismiss.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**!\r\n * Javascript plugin: popupDismiss v5.3.1.20181110\r\n *\r\n */\r\nclass Util {\r\n\t// Utils\r\n\tstatic addClass(el, className)\r\n\t{\r\n\t\tif (el.classList)\r\n\t\t\tel.classList.add(className);\r\n\t\telse\r\n\t\t\tel.className += ' ' + className;\r\n\t}\r\n\r\n\tstatic removeClass(el, className)\r\n\t{\r\n\t\tif (el.classList)\r\n\t\t\tel.classList.remove(className);\r\n\t\telse\r\n\t\t\tel.className = el.className.replace(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'), ' ');\r\n\t}\r\n\r\n\tstatic findParent(element, selector)\r\n\t{\r\n\t\tlet matches = (el, selector) => {\r\n\t\t\treturn (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector).call(el, selector);\r\n\t\t};\r\n\t\twhile ((element = element.parentElement) && !matches(element, selector))\r\n\t\t{\r\n\t\t}\r\n\t\treturn element;\r\n\t}\r\n\r\n\tstatic hasClosest(el, parentElement)\r\n\t{\r\n\t\tif (el === parentElement)\r\n\t\t{\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (parentElement === undefined)\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet parents = [], p = el.parentNode;\r\n\t\twhile (p !== parentElement && p.parentNode)\r\n\t\t{\r\n\t\t\tlet o = p;\r\n\t\t\tparents.push(o);\r\n\t\t\tp = o.parentNode;\r\n\t\t}\r\n\t\treturn p === parentElement;\r\n\t}\r\n\r\n\tstatic getSelectorsElements(selectorString)\r\n\t{\r\n\t\tif (!selectorString || (selectorString && selectorString.trim() === ''))\r\n\t\t{\r\n\t\t\treturn [document];\r\n\t\t}\r\n\t\tlet selectorsElements = [],\r\n\t\t\t\tselectorsArray = selectorString.split(',').map((selectorStringItem) => {\r\n\t\t\t\t\treturn selectorStringItem.trim();\r\n\t\t\t\t});\r\n\t\tselectorsArray = Util.uniqueArray(selectorsArray);\r\n\t\tfor (let i = 0, l = selectorsArray.length; i < l; i++)\r\n\t\t{\r\n\t\t\tif (selectorsArray[i] === 'document')\r\n\t\t\t{\r\n\t\t\t\tselectorsElements.push(document);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tlet scopeNodeList = [].slice.call(document.querySelectorAll(selectorsArray[i]));\r\n\t\t\t\tselectorsElements = selectorsElements.concat(scopeNodeList);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn selectorsElements;\r\n\t}\r\n\r\n\tstatic uniqueArray(sourceArray)\r\n\t{\r\n\t\tlet resultArray = [], hash = {};\r\n\t\tfor (let i = 0, elem, l = sourceArray.length; i < l && (elem = sourceArray[i]) !== null; i++)\r\n\t\t{\r\n\t\t\tif (!hash[elem])\r\n\t\t\t{\r\n\t\t\t\tresultArray.push(elem);\r\n\t\t\t\thash[elem] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn resultArray;\r\n\t}\r\n\r\n\t//Extend on/off methods\r\n\tstatic extendOnOff(el)\r\n\t{\r\n\t\tif (el.length === 0)\r\n\t\t\treturn null;\r\n\t\tlet events = {\r\n\t\t\ton: function (event, callback, opts) {\r\n\t\t\t\tif (!this.namespaces) // save the namespaces on the DOM element itself\r\n\t\t\t\t\tthis.namespaces = {};\r\n\r\n\t\t\t\tthis.namespaces[event] = callback;\r\n\t\t\t\tlet options = opts || false;\r\n\r\n\t\t\t\tthis.addEventListener(event.split('.')[0], callback, options);\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\toff: function (event) {\r\n\t\t\t\tthis.removeEventListener(event.split('.')[0], this.namespaces[event]);\r\n\t\t\t\tdelete this.namespaces[event];\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Extend the DOM with these above custom methods\r\n\t\tif (!el.isExtendOnOff)\r\n\t\t{\r\n\t\t\tel.on = Element.prototype.on = events.on;\r\n\t\t\tel.off = Element.prototype.off = events.off;\r\n\t\t\tel.isExtendOnOff = true;\r\n\t\t}\r\n\t\treturn el;\r\n\t}\r\n\r\n\tstatic getElements(elements)\r\n\t{\r\n\t\tlet resultElement = [];\r\n\t\tif (elements === undefined || elements === null)\r\n\t\t{\r\n\t\t\tresultElement = [];\r\n\t\t}\r\n\t\telse if (elements.jquery)\r\n\t\t{\r\n\t\t\tresultElement = elements.length > 1 ? elements.get() : [elements[0]];\r\n\t\t}\r\n\t\telse if (elements instanceof window.NodeList || elements instanceof NodeList || elements instanceof HTMLCollection)\r\n\t\t{\r\n\t\t\tresultElement = Array.prototype.slice.call(elements);\r\n\t\t}\r\n\t\telse if (Array.isArray(elements))\r\n\t\t{\r\n\t\t\tresultElement = elements.filter(function (element) {\r\n\t\t\t\treturn element.nodeType === 1 || element.jquery;\r\n\t\t\t});\r\n\t\t}\r\n\t\telse if (elements.nodeType === 1)\r\n\t\t{\r\n\t\t\tresultElement = [elements];\r\n\t\t}\r\n\t\telse if (typeof elements === 'string')\r\n\t\t{\r\n\t\t\tresultElement = document.querySelectorAll(elements);\r\n\t\t}\r\n\t\treturn resultElement;\r\n\t}\r\n\r\n\tstatic getUrlQueryParams(url)\r\n\t{\r\n\t\tlet query = {},\r\n\t\t\t\tsearchStr = url ? (url.indexOf('?') !== -1 ? url.split('?')[1] : '') : window.location.search.substring(1),\r\n\t\t\t\tqueryParams = searchStr.split(\"&\");\r\n\t\tfor (let i = 0; i < queryParams.length; i++)\r\n\t\t{\r\n\t\t\tlet queryParam = queryParams[i].split(\"=\");\r\n\t\t\tif (queryParam.length > 1)\r\n\t\t\t{\r\n\t\t\t\tquery[queryParam[0]] = queryParam[1];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn query;\r\n\t}\r\n\r\n\tstatic getScriptByName(scriptName)\r\n\t{\r\n\t\tlet allScripts = document.getElementsByTagName(\"script\");\r\n\r\n\t\tif (scriptName)\r\n\t\t{\r\n\t\t\tfor (let i = 0; i < allScripts.length; i++)\r\n\t\t\t{\r\n\t\t\t\tlet script = allScripts.item(i);\r\n\r\n\t\t\t\tif (script.src && script.src.split('?')[0].match(scriptName))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn script;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nclass PopupDismiss {\r\n\tconstructor(elements, isDelegated = false)\r\n\t{\r\n\t\tthis.name = 'popupDismiss';\r\n\t\tthis.isTap = undefined;\r\n\t\tthis.attr = {\r\n\t\t\tdataToggle: 'data-toggle',\r\n\t\t\tdataTarget: 'data-target',\r\n\t\t\tdataDismissScope: 'data-dismiss-scope',\r\n\t\t\tdataToggleClass: 'data-toggle-class',\r\n\t\t\tdataPopupHandler: 'data-popup-handler',\r\n\t\t\tdataDismissHandler: 'data-dismiss-handler',\r\n\t\t\tdataIsPopup: 'data-isPopup',\r\n\t\t\tdataPopupDismiss: 'data-popup-dismiss',\r\n\t\t};\r\n\t\tthis.popupEvent = this.popupEvent.bind(this);\r\n\r\n\t\tif (elements === undefined)\r\n\t\t{\r\n\t\t\tthis.initDelegate(document.body);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.elements = Util.getElements(elements);\r\n\t\t\tthis.isDelegated = isDelegated || (elements === undefined);\r\n\r\n\t\t\tthis.init = this.isDelegated ? this.initDelegate : this.initElement;\r\n\t\t\t[].slice.call(this.elements).forEach(element => this.init(element));\r\n\t\t}\r\n\t}\r\n\r\n\tinitElement(element)\r\n\t{\r\n\t\tif (element.getAttribute(this.attr.dataToggle) === this.name && element.getAttribute(`data-${this.name}`) !== this.name)\r\n\t\t{\r\n\t\t\telement.setAttribute(`data-${this.name}`, this.name);\r\n\t\t\telement.addEventListener(\"click\", this.popupEvent);\r\n\t\t}\r\n\t}\r\n\r\n\tinitDelegate(element)\r\n\t{\r\n\t\tthis.delegate(element, 'click', `[${this.attr.dataToggle}=\"${this.name}\"]`, this.popupEvent);\r\n\t}\r\n\r\n\tdelegate(element, eventName, selector, handler)\r\n\t{\r\n\t\telement.addEventListener(eventName, (event) => {\r\n\t\t\tlet target = event.target,\r\n\t\t\t\t\tpopupDismissElement = null;\r\n\t\t\tif (target.getAttribute(this.attr.dataToggle) === this.name)\r\n\t\t\t{\r\n\t\t\t\tpopupDismissElement = target;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tpopupDismissElement = Util.findParent(target, selector);\r\n\t\t\t}\r\n\t\t\tpopupDismissElement && handler.call(popupDismissElement, event);\r\n\t\t});\r\n\t}\r\n\r\n\tpopupTarget(dataTarget, triggerElement)\r\n\t{\r\n\t\tlet targetElement = null,\r\n\t\t\t\tparentParam = 'parent',\r\n\t\t\t\tparentParamIndex = dataTarget.indexOf(parentParam);\r\n\t\tif (parentParamIndex === 0)\r\n\t\t{\r\n\t\t\ttargetElement = triggerElement.parentNode;\r\n\t\t\tlet subSelector = dataTarget.slice(parentParam.length).trim();\r\n\t\t\tif (subSelector.length)\r\n\t\t\t{\r\n\t\t\t\tif (subSelector.indexOf(parentParam) === 0)\r\n\t\t\t\t{\r\n\t\t\t\t\ttargetElement = this.popupTarget(subSelector, triggerElement);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\ttargetElement = triggerElement.querySelector(subSelector);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttargetElement = document.querySelector(dataTarget);\r\n\t\t}\r\n\t\treturn targetElement;\r\n\t}\r\n\r\n\tpopupEvent(event)\r\n\t{\r\n\t\tlet popupTrigger = event.target,\r\n\t\t\t\tthat = this;\r\n\t\tif (popupTrigger.getAttribute(this.attr.dataToggle) !== this.name)\r\n\t\t{\r\n\t\t\tpopupTrigger = Util.findParent(popupTrigger, `[${this.attr.dataToggle}=\"${this.name}\"]`);\r\n\t\t}\r\n\t\tlet dataDismissScope = popupTrigger.getAttribute(this.attr.dataDismissScope),\r\n\t\t\t\tdismissScopes = Util.getSelectorsElements(dataDismissScope),\r\n\t\t\t\teventData = {\r\n\t\t\t\t\ttype: event.type,\r\n\t\t\t\t\tnamespace: popupTrigger.getAttribute(this.attr.dataTarget) + '-' + new Date().getTime(),\r\n\t\t\t\t\tpopupTrigger: popupTrigger,\r\n\t\t\t\t\tpopupTarget: this.popupTarget(popupTrigger.getAttribute(this.attr.dataTarget), popupTrigger),\r\n\t\t\t\t\ttoggledClass: popupTrigger.getAttribute(this.attr.dataToggleClass) || null, // Recommend: 'open'\r\n\t\t\t\t\tpopupHandler: popupTrigger.getAttribute(this.attr.dataPopupHandler) || null,\r\n\t\t\t\t\tdismissHandler: popupTrigger.getAttribute(this.attr.dataDismissHandler) || null,\r\n\t\t\t\t\tdismissScopes: dismissScopes\r\n\t\t\t\t};\r\n\r\n\t\tif (eventData.popupTarget.getAttribute(this.attr.dataIsPopup) !== 'true')\r\n\t\t{\r\n\t\t\tthis.monitorTap();\r\n\t\t\tif (eventData.toggledClass)\r\n\t\t\t{\r\n\t\t\t\tUtil.addClass(eventData.popupTrigger, eventData.toggledClass);\r\n\t\t\t\tUtil.addClass(eventData.popupTarget, eventData.toggledClass);\r\n\t\t\t}\r\n\t\t\teventData.popupTarget.setAttribute(this.attr.dataIsPopup, 'true');\r\n\t\t\teventData.dismissScopes.forEach((scope) => {\r\n\t\t\t\tUtil.extendOnOff(scope)\r\n\t\t\t\t\t\t.on(`${eventData.type}.${eventData.namespace}`, (newEvent) => {\r\n\t\t\t\t\t\t\tif (event === newEvent)\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\tlet newEventData = {\r\n\t\t\t\t\t\t\t\ttype: eventData.type,\r\n\t\t\t\t\t\t\t\tnamespace: eventData.namespace,\r\n\t\t\t\t\t\t\t\tdismissTrigger: newEvent.target,\r\n\t\t\t\t\t\t\t\tpopupTrigger: eventData.popupTrigger,\r\n\t\t\t\t\t\t\t\tpopupTarget: eventData.popupTarget,\r\n\t\t\t\t\t\t\t\ttoggledClass: eventData.toggledClass,\r\n\t\t\t\t\t\t\t\tdismissHandler: eventData.dismissHandler,\r\n\t\t\t\t\t\t\t\tdismissScopes: eventData.dismissScopes\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tthat.dismiss(newEventData, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t\teventData.popupHandler !== null && window[eventData.popupHandler](eventData.popupTarget);\r\n\t\t\tPopupDismiss.setBodyCursorInIOS(\"pointer\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\teventData.dismissTrigger = popupTrigger;\r\n\t\t\tthat.dismiss(eventData);\r\n\t\t}\r\n\t}\r\n\r\n\tdismiss(eventData, isTrigger)\r\n\t{\r\n\t\tif (this.isTap === false)\r\n\t\t\treturn;\r\n\r\n\t\tif (!isTrigger ||\r\n\t\t\t\t(!Util.hasClosest(eventData.dismissTrigger, eventData.popupTrigger)\r\n\t\t\t\t\t\t&& this.isDismissTrigger(eventData.dismissTrigger, eventData.popupTarget)\r\n\t\t\t\t\t\t&& eventData.popupTarget.getAttribute(this.attr.dataIsPopup) === 'true'\r\n\t\t\t\t)\r\n\t\t)\r\n\t\t{\r\n\t\t\tif (eventData.toggledClass)\r\n\t\t\t{\r\n\t\t\t\tUtil.removeClass(eventData.popupTrigger, eventData.toggledClass);\r\n\t\t\t\tUtil.removeClass(eventData.popupTarget, eventData.toggledClass);\r\n\t\t\t}\r\n\t\t\teventData.popupTarget.setAttribute(this.attr.dataIsPopup, 'false');\r\n\t\t\teventData.dismissScopes.forEach((scope) => {\r\n\t\t\t\tscope.off(`${eventData.type}.${eventData.namespace}`, () => this.dismiss(eventData, true));\r\n\t\t\t});\r\n\t\t\teventData.dismissHandler !== null && window[eventData.dismissHandler](eventData.popupTarget);\r\n\r\n\t\t\tPopupDismiss.setBodyCursorInIOS(\"default\");\r\n\t\t}\r\n\t}\r\n\r\n\tmonitorTap()\r\n\t{\r\n\t\tlet that = this,\r\n\t\t\t\tstart = {},\r\n\t\t\t\tend = {};\r\n\t\tthis.isTap = undefined;\r\n\r\n\t\tdocument.body.addEventListener('mousedown', mouseDown);\r\n\t\tdocument.body.addEventListener('mouseup', mouseUp);\r\n\r\n\t\tfunction mouseDown(event)\r\n\t\t{\r\n\t\t\tthat.isTap = false;\r\n\t\t\tstart.x = event.pageX;\r\n\t\t\tstart.y = event.pageY;\r\n\t\t}\r\n\r\n\t\tfunction mouseUp(event)\r\n\t\t{\r\n\t\t\tend.x = event.pageX;\r\n\t\t\tend.y = event.pageY;\r\n\r\n\t\t\tif (Math.abs(end.x - start.x) < 5 && Math.abs(end.y - start.y) < 5)\r\n\t\t\t{\r\n\t\t\t\tthat.isTap = true;\r\n\t\t\t\tdocument.body.removeEventListener('mousedown', mouseDown);\r\n\t\t\t\tdocument.body.removeEventListener('mouseup', mouseUp);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Default: all be dismiss trigger(return true);\r\n\t// Check click point ($child) has '[data-popup-dismiss=\"false\"]'('[data-popup-dismiss=\"true\"]') or not;\r\n\tisDismissTrigger(child, parent)\r\n\t{\r\n\t\tif (Util.hasClosest(child, parent))\r\n\t\t{\r\n\t\t\tlet dataPopupDismiss = child.getAttribute(this.attr.dataPopupDismiss),\r\n\t\t\t\t\tparentDismissFalse;\r\n\t\t\tif (dataPopupDismiss === 'false' || dataPopupDismiss === 'true')\r\n\t\t\t{\r\n\t\t\t\treturn dataPopupDismiss === 'true';\r\n\t\t\t}\r\n\t\t\telse if (parentDismissFalse = Util.findParent(child, `[${this.attr.dataPopupDismiss}=\"false\"]`))\r\n\t\t\t{\r\n\t\t\t\tlet parentDismissTrue = Util.findParent(child, `[${this.attr.dataPopupDismiss}=\"true\"]`);\r\n\t\t\t\treturn parentDismissTrue ? Util.hasClosest(parentDismissTrue, parentDismissFalse) : false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Fix issue : In iOS device, the dismiss function could not be triggered;\r\n\tstatic setBodyCursorInIOS(val)\r\n\t{\r\n\t\tif (/iPhone|iPad|iPod/i.test(navigator.userAgent))\r\n\t\t{\r\n\t\t\tlet body = document.querySelector('body'),\r\n\t\t\t\t\tpopupCount = parseInt(body.getAttribute('popup-count') || '0', 10);\r\n\t\t\tif (val === 'pointer')\r\n\t\t\t{\r\n\t\t\t\t++popupCount === 1 && (body.style.cursor = val);\r\n\t\t\t}\r\n\t\t\telse if (val === 'default')\r\n\t\t\t{\r\n\t\t\t\t--popupCount && (body.style.cursor = val);\r\n\t\t\t}\r\n\t\t\tbody.setAttribute('popup-count', popupCount.toString());\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Downward compatibility\r\nwindow.popupDismiss = (elements) => {\r\n\tconsole.warn('popupDismiss.min.js: [Deprecation] popupDismiss() is deprecated. Please use new PopupDismiss(elements) instead.');\r\n\treturn new PopupDismiss(elements);\r\n};\r\n\r\nwindow.popupDismissDelegate = (elements) => {\r\n\tconsole.warn('popupDismiss.min.js: [Deprecation] popupDismissDelegate() is deprecated. Please use new PopupDismiss(elements, true) instead.');\r\n\treturn new PopupDismiss(elements, true);\r\n};\r\n\r\n/**\r\n * Auto init plugin if plugin.js?init=auto\r\n */\r\n(function () {\r\n\tlet pluginFileName = 'popupDismiss',\r\n\t\t\tcurrentScript = Util.getScriptByName(pluginFileName);\r\n\tif (!!currentScript)\r\n\t{\r\n\t\tlet scriptParamInit = Util.getUrlQueryParams(currentScript['src'])['init'],\r\n\t\t\t\tinitPopupDismiss = () => new PopupDismiss();\r\n\t\tif (scriptParamInit === 'auto')\r\n\t\t{\r\n\t\t\tif (document.readyState !== \"complete\")\r\n\t\t\t{\r\n\t\t\t\tdocument.addEventListener('DOMContentLoaded', initPopupDismiss);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tinitPopupDismiss();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\r\n\t\tconsole.warn('popupDismiss.min.js: [Notice] PopupDismiss auto-initialization failed with compatibility issue if import with \"[url]?init=auto\"!');\r\n\t}\r\n})();\r\n\r\nexport default PopupDismiss"],"sourceRoot":""}