{"version":3,"sources":["webpack://PopupDismiss/webpack/bootstrap","webpack://PopupDismiss/./scripts/popupDismiss.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","Util","el","className","classList","add","remove","replace","RegExp","split","join","element","selector","matches","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","parentElement","undefined","parents","parentNode","push","selectorString","trim","document","selectorsElements","selectorsArray","map","selectorStringItem","uniqueArray","length","scopeNodeList","slice","querySelectorAll","concat","sourceArray","elem","resultArray","hash","events","event","callback","opts","this","namespaces","options","addEventListener","removeEventListener","isExtendOnOff","on","Element","off","elements","resultElement","jquery","window","NodeList","HTMLCollection","Array","isArray","filter","nodeType","url","query","queryParams","indexOf","location","search","substring","queryParam","scriptName","allScripts","getElementsByTagName","currentScript","script","item","src","match","PopupDismiss","_this","isDelegated","arguments","_classCallCheck","isTap","attr","dataToggle","dataTarget","dataDismissScope","dataToggleClass","dataPopupHandler","dataDismissHandler","dataIsPopup","dataPopupDismiss","popupEvent","bind","initDelegate","body","getElements","init","initElement","forEach","getAttribute","setAttribute","delegate","eventName","handler","_this2","target","popupDismissElement","findParent","triggerElement","targetElement","querySelector","popupTarget","popupTrigger","that","dismissScopes","getSelectorsElements","eventData","type","namespace","Date","getTime","toggledClass","popupHandler","dismissHandler","monitorTap","addClass","scope","extendOnOff","newEvent","newEventData","dismissTrigger","dismiss","setBodyCursorInIOS","isTrigger","_this3","hasClosest","isDismissTrigger","removeClass","start","end","mouseDown","x","pageX","y","pageY","mouseUp","Math","abs","child","parent","parentDismissFalse","parentDismissTrue","val","test","navigator","userAgent","popupCount","parseInt","style","cursor","toString","getCurrentScript","initPopupDismiss","getUrlQueryParams","readyState","console","log"],"mappings":"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","file":"popupDismiss.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**!\r\n * Javascript plugin: popupDismiss v5.0.20181105\r\n *\r\n */\r\nclass Util {\r\n\t// Utils\r\n\tstatic addClass(el, className)\r\n\t{\r\n\t\tif (el.classList)\r\n\t\t\tel.classList.add(className);\r\n\t\telse\r\n\t\t\tel.className += ' ' + className;\r\n\t}\r\n\r\n\tstatic removeClass(el, className)\r\n\t{\r\n\t\tif (el.classList)\r\n\t\t\tel.classList.remove(className);\r\n\t\telse\r\n\t\t\tel.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\r\n\t}\r\n\r\n\tstatic findParent(element, selector)\r\n\t{\r\n\t\tlet matches = (el, selector) => {\r\n\t\t\treturn (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector).call(el, selector);\r\n\t\t};\r\n\t\twhile ((element = element.parentElement) && !matches(element, selector))\r\n\t\t{\r\n\t\t}\r\n\t\treturn element;\r\n\t}\r\n\r\n\tstatic hasClosest(el, parentElement)\r\n\t{\r\n\t\tif (el === parentElement)\r\n\t\t{\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (parentElement === undefined)\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet parents = [], p = el.parentNode;\r\n\t\twhile (p !== parentElement && p.parentNode)\r\n\t\t{\r\n\t\t\tlet o = p;\r\n\t\t\tparents.push(o);\r\n\t\t\tp = o.parentNode;\r\n\t\t}\r\n\t\treturn p === parentElement;\r\n\t}\r\n\r\n\tstatic getSelectorsElements(selectorString)\r\n\t{\r\n\t\tif (!selectorString || (selectorString && selectorString.trim() === ''))\r\n\t\t{\r\n\t\t\treturn [document];\r\n\t\t}\r\n\t\tlet selectorsElements = [],\r\n\t\t\t\tselectorsArray = selectorString.split(',').map((selectorStringItem) => {\r\n\t\t\t\t\treturn selectorStringItem.trim();\r\n\t\t\t\t});\r\n\t\tselectorsArray = Util.uniqueArray(selectorsArray);\r\n\t\tfor (let i = 0, l = selectorsArray.length; i < l; i++)\r\n\t\t{\r\n\t\t\tif (selectorsArray[i] === 'document')\r\n\t\t\t{\r\n\t\t\t\tselectorsElements.push(document);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tlet scopeNodeList = [].slice.call(document.querySelectorAll(selectorsArray[i]));\r\n\t\t\t\tselectorsElements = selectorsElements.concat(scopeNodeList);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn selectorsElements;\r\n\t}\r\n\r\n\tstatic uniqueArray(sourceArray)\r\n\t{\r\n\t\tlet resultArray = [], hash = {};\r\n\t\tfor (let i = 0, elem, l = sourceArray.length; i < l && (elem = sourceArray[i]) !== null; i++)\r\n\t\t{\r\n\t\t\tif (!hash[elem])\r\n\t\t\t{\r\n\t\t\t\tresultArray.push(elem);\r\n\t\t\t\thash[elem] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn resultArray;\r\n\t}\r\n\r\n\t//Extend on/off methods\r\n\tstatic extendOnOff(el)\r\n\t{\r\n\t\tif (el.length === 0)\r\n\t\t\treturn null;\r\n\t\tlet events = {\r\n\t\t\ton: function (event, callback, opts) {\r\n\t\t\t\tif (!this.namespaces) // save the namespaces on the DOM element itself\r\n\t\t\t\t\tthis.namespaces = {};\r\n\r\n\t\t\t\tthis.namespaces[event] = callback;\r\n\t\t\t\tlet options = opts || false;\r\n\r\n\t\t\t\tthis.addEventListener(event.split('.')[0], callback, options);\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\toff: function (event) {\r\n\t\t\t\tthis.removeEventListener(event.split('.')[0], this.namespaces[event]);\r\n\t\t\t\tdelete this.namespaces[event];\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Extend the DOM with these above custom methods\r\n\t\tif (!el.isExtendOnOff)\r\n\t\t{\r\n\t\t\tel.on = Element.prototype.on = events.on;\r\n\t\t\tel.off = Element.prototype.off = events.off;\r\n\t\t\tel.isExtendOnOff = true;\r\n\t\t}\r\n\t\treturn el;\r\n\t}\r\n\r\n\tstatic getElements(elements)\r\n\t{\r\n\t\tlet resultElement = [];\r\n\t\tif (elements === undefined || elements === null)\r\n\t\t{\r\n\t\t\tresultElement = [];\r\n\t\t}\r\n\t\telse if (elements.jquery)\r\n\t\t{\r\n\t\t\tresultElement = elements.length > 1 ? elements.get() : [elements[0]];\r\n\t\t}\r\n\t\telse if (elements instanceof window.NodeList || elements instanceof NodeList || elements instanceof HTMLCollection)\r\n\t\t{\r\n\t\t\tresultElement = Array.prototype.slice.call(elements);\r\n\t\t}\r\n\t\telse if (Array.isArray(elements))\r\n\t\t{\r\n\t\t\tresultElement = elements.filter(function (element) {\r\n\t\t\t\treturn element.nodeType === 1 || element.jquery;\r\n\t\t\t});\r\n\t\t}\r\n\t\telse if (elements.nodeType === 1)\r\n\t\t{\r\n\t\t\tresultElement = [elements];\r\n\t\t}\r\n\t\telse if (typeof elements === 'string')\r\n\t\t{\r\n\t\t\tresultElement = document.querySelectorAll(elements);\r\n\t\t}\r\n\t\treturn resultElement;\r\n\t}\r\n\r\n\tstatic getUrlQueryParams(url)\r\n\t{\r\n\t\tlet query = {},\r\n\t\t\t\tsearchStr = url ? (url.indexOf('?') !== -1 ? url.split('?')[1] : '') : window.location.search.substring(1),\r\n\t\t\t\tqueryParams = searchStr.split(\"&\");\r\n\t\tfor (let i = 0; i < queryParams.length; i++)\r\n\t\t{\r\n\t\t\tlet queryParam = queryParams[i].split(\"=\");\r\n\t\t\tif (queryParam.length > 1)\r\n\t\t\t{\r\n\t\t\t\tquery[queryParam[0]] = queryParam[1];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn query;\r\n\t}\r\n\r\n\tstatic getCurrentScript(scriptName)\r\n\t{\r\n\t\tlet allScripts = document.getElementsByTagName(\"script\");\r\n\r\n\t\tif (scriptName)\r\n\t\t{\r\n\t\t\tfor (let i = 0; i < allScripts.length; i++)\r\n\t\t\t{\r\n\t\t\t\tlet script = allScripts.item(i);\r\n\r\n\t\t\t\tif (script.src && script.src.match(scriptName))\r\n\t\t\t\t{\r\n\t\t\t\t\treturn script;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tif (document.currentScript)\r\n\t\t\t{\r\n\t\t\t\treturn document.currentScript;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\treturn allScripts[allScripts.length - 1];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nclass PopupDismiss {\r\n\tconstructor(elements, isDelegated = false)\r\n\t{\r\n\t\tthis.name = 'popupDismiss';\r\n\t\tthis.isTap = undefined;\r\n\t\tthis.attr = {\r\n\t\t\tdataToggle: 'data-toggle',\r\n\t\t\tdataTarget: 'data-target',\r\n\t\t\tdataDismissScope: 'data-dismiss-scope',\r\n\t\t\tdataToggleClass: 'data-toggle-class',\r\n\t\t\tdataPopupHandler: 'data-popup-handler',\r\n\t\t\tdataDismissHandler: 'data-dismiss-handler',\r\n\t\t\tdataIsPopup: 'data-isPopup',\r\n\t\t\tdataPopupDismiss: 'data-popup-dismiss',\r\n\t\t};\r\n\t\tthis.popupEvent = this.popupEvent.bind(this);\r\n\r\n\t\tif (elements === undefined)\r\n\t\t{\r\n\t\t\tthis.initDelegate(document.body);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.elements = Util.getElements(elements);\r\n\t\t\tthis.isDelegated = isDelegated || (elements === undefined);\r\n\r\n\t\t\tthis.init = this.isDelegated ? this.initDelegate : this.initElement;\r\n\t\t\tthis.elements.forEach(element => this.init(element));\r\n\t\t}\r\n\t}\r\n\r\n\tinitElement(element)\r\n\t{\r\n\t\tif (element.getAttribute(this.attr.dataToggle) === this.name && element.getAttribute(`data-${this.name}`) !== this.name)\r\n\t\t{\r\n\t\t\telement.setAttribute(`data-${this.name}`, this.name);\r\n\t\t\telement.addEventListener(\"click\", this.popupEvent);\r\n\t\t}\r\n\t}\r\n\r\n\tinitDelegate(element)\r\n\t{\r\n\t\tthis.delegate(element, 'click', `[${this.attr.dataToggle}=\"${this.name}\"]`, this.popupEvent);\r\n\t}\r\n\r\n\tdelegate(element, eventName, selector, handler)\r\n\t{\r\n\t\telement.addEventListener(eventName, (event) => {\r\n\t\t\tlet target = event.target,\r\n\t\t\t\t\tpopupDismissElement = null;\r\n\t\t\tif (target.getAttribute(this.attr.dataToggle) === this.name)\r\n\t\t\t{\r\n\t\t\t\tpopupDismissElement = target;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tpopupDismissElement = Util.findParent(target, selector);\r\n\t\t\t}\r\n\t\t\tpopupDismissElement && handler.call(popupDismissElement, event);\r\n\t\t});\r\n\t}\r\n\r\n\tpopupTarget(dataTarget, triggerElement)\r\n\t{\r\n\t\tlet targetElement = null,\r\n\t\t\t\tparentParam = 'parent ';\r\n\t\tif (dataTarget.indexOf(parentParam) === 0)\r\n\t\t{\r\n\t\t\ttargetElement = triggerElement.parentNode.querySelector(dataTarget.split(parentParam.trim())[1]);\r\n\t\t\tif (dataTarget.split(parentParam)[1].indexOf(parentParam) === 0)\r\n\t\t\t{\r\n\t\t\t\ttargetElement = this.popupTarget(dataTarget.split(parentParam)[1], triggerElement);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttargetElement = document.querySelector(dataTarget);\r\n\t\t}\r\n\t\treturn targetElement;\r\n\t}\r\n\r\n\tpopupEvent(event)\r\n\t{\r\n\t\tlet popupTrigger = event.target,\r\n\t\t\t\tthat = this;\r\n\t\tif (popupTrigger.getAttribute(this.attr.dataToggle) !== this.name)\r\n\t\t{\r\n\t\t\tpopupTrigger = Util.findParent(popupTrigger, `[${this.attr.dataToggle}=\"${this.name}\"]`);\r\n\t\t}\r\n\t\tlet dataDismissScope = popupTrigger.getAttribute(this.attr.dataDismissScope),\r\n\t\t\t\tdismissScopes = Util.getSelectorsElements(dataDismissScope),\r\n\t\t\t\teventData = {\r\n\t\t\t\t\ttype: event.type,\r\n\t\t\t\t\tnamespace: popupTrigger.getAttribute(this.attr.dataTarget) + '-' + new Date().getTime(),\r\n\t\t\t\t\tpopupTrigger: popupTrigger,\r\n\t\t\t\t\tpopupTarget: this.popupTarget(popupTrigger.getAttribute(this.attr.dataTarget), popupTrigger),\r\n\t\t\t\t\ttoggledClass: popupTrigger.getAttribute(this.attr.dataToggleClass) || null, // Recommend: 'open'\r\n\t\t\t\t\tpopupHandler: popupTrigger.getAttribute(this.attr.dataPopupHandler) || null,\r\n\t\t\t\t\tdismissHandler: popupTrigger.getAttribute(this.attr.dataDismissHandler) || null,\r\n\t\t\t\t\tdismissScopes: dismissScopes\r\n\t\t\t\t};\r\n\r\n\t\tif (eventData.popupTarget.getAttribute(this.attr.dataIsPopup) !== 'true')\r\n\t\t{\r\n\t\t\tthis.monitorTap();\r\n\t\t\tif (eventData.toggledClass)\r\n\t\t\t{\r\n\t\t\t\tUtil.addClass(eventData.popupTrigger, eventData.toggledClass);\r\n\t\t\t\tUtil.addClass(eventData.popupTarget, eventData.toggledClass);\r\n\t\t\t}\r\n\t\t\teventData.popupTarget.setAttribute(this.attr.dataIsPopup, 'true');\r\n\t\t\teventData.dismissScopes.forEach((scope) => {\r\n\t\t\t\tUtil.extendOnOff(scope)\r\n\t\t\t\t\t\t.on(`${eventData.type}.${eventData.namespace}`, (newEvent) => {\r\n\t\t\t\t\t\t\tif (event === newEvent)\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\tlet newEventData = {\r\n\t\t\t\t\t\t\t\ttype: eventData.type,\r\n\t\t\t\t\t\t\t\tnamespace: eventData.namespace,\r\n\t\t\t\t\t\t\t\tdismissTrigger: newEvent.target,\r\n\t\t\t\t\t\t\t\tpopupTrigger: eventData.popupTrigger,\r\n\t\t\t\t\t\t\t\tpopupTarget: eventData.popupTarget,\r\n\t\t\t\t\t\t\t\ttoggledClass: eventData.toggledClass,\r\n\t\t\t\t\t\t\t\tdismissHandler: eventData.dismissHandler,\r\n\t\t\t\t\t\t\t\tdismissScopes: eventData.dismissScopes\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tthat.dismiss(newEventData, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t\teventData.popupHandler !== null && window[eventData.popupHandler](eventData.popupTarget);\r\n\t\t\tPopupDismiss.setBodyCursorInIOS(\"pointer\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\teventData.dismissTrigger = popupTrigger;\r\n\t\t\tthat.dismiss(eventData);\r\n\t\t}\r\n\t}\r\n\r\n\tdismiss(eventData, isTrigger)\r\n\t{\r\n\t\tif (this.isTap === false)\r\n\t\t\treturn;\r\n\r\n\t\tif (!isTrigger ||\r\n\t\t\t\t(!Util.hasClosest(eventData.dismissTrigger, eventData.popupTrigger)\r\n\t\t\t\t\t\t&& this.isDismissTrigger(eventData.dismissTrigger, eventData.popupTarget)\r\n\t\t\t\t\t\t&& eventData.popupTarget.getAttribute(this.attr.dataIsPopup) === 'true'\r\n\t\t\t\t)\r\n\t\t)\r\n\t\t{\r\n\t\t\tif (eventData.toggledClass)\r\n\t\t\t{\r\n\t\t\t\tUtil.removeClass(eventData.popupTrigger, eventData.toggledClass);\r\n\t\t\t\tUtil.removeClass(eventData.popupTarget, eventData.toggledClass);\r\n\t\t\t}\r\n\t\t\teventData.popupTarget.setAttribute(this.attr.dataIsPopup, 'false');\r\n\t\t\teventData.dismissScopes.forEach((scope) => {\r\n\t\t\t\tscope.off(`${eventData.type}.${eventData.namespace}`, () => this.dismiss(eventData, true));\r\n\t\t\t});\r\n\t\t\teventData.dismissHandler !== null && window[eventData.dismissHandler](eventData.popupTarget);\r\n\r\n\t\t\tPopupDismiss.setBodyCursorInIOS(\"default\");\r\n\t\t}\r\n\t}\r\n\r\n\tmonitorTap()\r\n\t{\r\n\t\tlet that = this,\r\n\t\t\t\tstart = {},\r\n\t\t\t\tend = {};\r\n\t\tthis.isTap = undefined;\r\n\r\n\t\tdocument.body.addEventListener('mousedown', mouseDown);\r\n\t\tdocument.body.addEventListener('mouseup', mouseUp);\r\n\r\n\t\tfunction mouseDown(event)\r\n\t\t{\r\n\t\t\tthat.isTap = false;\r\n\t\t\tstart.x = event.pageX;\r\n\t\t\tstart.y = event.pageY;\r\n\t\t}\r\n\r\n\t\tfunction mouseUp(event)\r\n\t\t{\r\n\t\t\tend.x = event.pageX;\r\n\t\t\tend.y = event.pageY;\r\n\r\n\t\t\tif (Math.abs(end.x - start.x) < 5 && Math.abs(end.y - start.y) < 5)\r\n\t\t\t{\r\n\t\t\t\tthat.isTap = true;\r\n\t\t\t\tdocument.body.removeEventListener('mousedown', mouseDown);\r\n\t\t\t\tdocument.body.removeEventListener('mouseup', mouseUp);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Default: all be dismiss trigger(return true);\r\n\t// Check click point ($child) has '[data-popup-dismiss=\"false\"]'('[data-popup-dismiss=\"true\"]') or not;\r\n\tisDismissTrigger(child, parent)\r\n\t{\r\n\t\tif (Util.hasClosest(child, parent))\r\n\t\t{\r\n\t\t\tlet dataPopupDismiss = child.getAttribute(this.attr.dataPopupDismiss),\r\n\t\t\t\t\tparentDismissFalse;\r\n\t\t\tif (dataPopupDismiss === 'false' || dataPopupDismiss === 'true')\r\n\t\t\t{\r\n\t\t\t\treturn dataPopupDismiss === 'true';\r\n\t\t\t}\r\n\t\t\telse if (parentDismissFalse = Util.findParent(child, `[${this.attr.dataPopupDismiss}=\"false\"]`))\r\n\t\t\t{\r\n\t\t\t\tlet parentDismissTrue = Util.findParent(child, `[${this.attr.dataPopupDismiss}=\"true\"]`);\r\n\t\t\t\treturn parentDismissTrue ? Util.hasClosest(parentDismissTrue, parentDismissFalse) : false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Fix issue : In iOS device, the dismiss function could not be triggered;\r\n\tstatic setBodyCursorInIOS(val)\r\n\t{\r\n\t\tif (/iPhone|iPad|iPod/i.test(navigator.userAgent))\r\n\t\t{\r\n\t\t\tlet body = document.querySelector('body'),\r\n\t\t\t\t\tpopupCount = parseInt(body.getAttribute('popup-count') || '0', 10);\r\n\t\t\tif (val === 'pointer')\r\n\t\t\t{\r\n\t\t\t\t++popupCount === 1 && (body.style.cursor = val);\r\n\t\t\t}\r\n\t\t\telse if (val === 'default')\r\n\t\t\t{\r\n\t\t\t\t--popupCount && (body.style.cursor = val);\r\n\t\t\t}\r\n\t\t\tbody.setAttribute('popup-count', popupCount.toString());\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Auto init plugin if plugin.js?init=auto\r\n */\r\n(function () {\r\n\tlet pluginFileName = 'popupDismiss',\r\n\t\t\tcurrentScript = Util.getCurrentScript(pluginFileName);\r\n\tif (!!currentScript)\r\n\t{\r\n\t\tlet scriptParamInit = Util.getUrlQueryParams(currentScript['src'])['init'],\r\n\t\t\t\tinitPopupDismiss = () => new PopupDismiss();\r\n\t\tif (scriptParamInit === 'auto')\r\n\t\t{\r\n\t\t\tif (document.readyState !== \"complete\")\r\n\t\t\t{\r\n\t\t\t\tdocument.addEventListener('DOMContentLoaded', initPopupDismiss);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tinitPopupDismiss();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\r\n\t\tconsole.log('PopupDismiss initialized failed if you import with \"popupDismiss.min.js?init=auto\"!');\r\n\t}\r\n})();\r\n\r\nexport default PopupDismiss"],"sourceRoot":""}