{"version":3,"sources":["webpack://PopupDismiss/webpack/bootstrap","webpack://PopupDismiss/./scripts/popupDismiss.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","initPopupDismiss","Util","el","className","classList","add","remove","replace","RegExp","split","join","selector","matches","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","element","parentElement","undefined","parents","parentNode","push","selectorString","trim","document","selectorsElements","selectorsArray","map","selectorStringItem","uniqueArray","length","scopeNodeList","slice","querySelectorAll","concat","sourceArray","elem","resultArray","hash","events","event","callback","opts","this","namespaces","options","addEventListener","removeEventListener","isExtendOnOff","on","Element","off","elements","resultElement","jquery","window","NodeList","HTMLCollection","Array","isArray","filter","nodeType","url","query","queryParams","indexOf","location","search","substring","queryParam","scripts","getElementsByTagName","currentScript","src","PopupDismiss","_this","isDelegated","arguments","_classCallCheck","isTap","attr","dataToggle","dataTarget","dataDismissScope","dataToggleClass","dataPopupHandler","dataDismissHandler","dataIsPopup","dataPopupDismiss","popupEvent","bind","initDelegate","body","getElements","init","initElement","forEach","getAttribute","setAttribute","delegate","eventName","handler","_this2","target","popupDismissElement","findParent","triggerElement","targetElement","querySelector","popupTarget","popupTrigger","that","dismissScopes","getSelectorsElements","eventData","type","namespace","Date","getTime","toggledClass","popupHandler","dismissHandler","monitorTap","addClass","scope","extendOnOff","newEvent","newEventData","dismissTrigger","dismiss","setBodyCursorInIOS","isTrigger","_this3","hasClosest","isDismissTrigger","removeClass","start","end","mouseDown","x","pageX","y","pageY","mouseUp","Math","abs","child","parent","parentDismissFalse","parentDismissTrue","val","test","navigator","userAgent","popupCount","parseInt","style","cursor","toString","getUrlQueryParams","getCurrentScriptSrc","readyState"],"mappings":"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","file":"popupDismiss.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**!\r\n * Javascript plugin: popupDismiss v5.0.20181103\r\n *\r\n */\r\nclass Util {\r\n\t// Utils\r\n\tstatic addClass(el, className)\r\n\t{\r\n\t\tif (el.classList)\r\n\t\t\tel.classList.add(className);\r\n\t\telse\r\n\t\t\tel.className += ' ' + className;\r\n\t}\r\n\r\n\tstatic removeClass(el, className)\r\n\t{\r\n\t\tif (el.classList)\r\n\t\t\tel.classList.remove(className);\r\n\t\telse\r\n\t\t\tel.className = el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\r\n\t}\r\n\r\n\tstatic matches(el, selector)\r\n\t{\r\n\t\treturn (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector).call(el, selector);\r\n\t}\r\n\r\n\tstatic findParent(element, selector)\r\n\t{\r\n\t\twhile ((element = element.parentElement) && !Util.matches(element, selector))\r\n\t\t{\r\n\t\t}\r\n\t\treturn element;\r\n\t}\r\n\r\n\tstatic hasClosest(el, parentElement)\r\n\t{\r\n\t\tif (el === parentElement)\r\n\t\t{\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (parentElement === undefined)\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet parents = [], p = el.parentNode;\r\n\t\twhile (p !== parentElement && p.parentNode)\r\n\t\t{\r\n\t\t\tlet o = p;\r\n\t\t\tparents.push(o);\r\n\t\t\tp = o.parentNode;\r\n\t\t}\r\n\t\treturn p === parentElement;\r\n\t}\r\n\r\n\tstatic getSelectorsElements(selectorString)\r\n\t{\r\n\t\tif (!selectorString || (selectorString && selectorString.trim() === ''))\r\n\t\t{\r\n\t\t\treturn [document];\r\n\t\t}\r\n\t\tlet selectorsElements = [],\r\n\t\t\t\tselectorsArray = selectorString.split(',').map((selectorStringItem) => {\r\n\t\t\t\t\treturn selectorStringItem.trim();\r\n\t\t\t\t});\r\n\t\tselectorsArray = Util.uniqueArray(selectorsArray);\r\n\t\tfor (let i = 0, l = selectorsArray.length; i < l; i++)\r\n\t\t{\r\n\t\t\tif (selectorsArray[i] === 'document')\r\n\t\t\t{\r\n\t\t\t\tselectorsElements.push(document);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tlet scopeNodeList = [].slice.call(document.querySelectorAll(selectorsArray[i]));\r\n\t\t\t\tselectorsElements = selectorsElements.concat(scopeNodeList);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn selectorsElements;\r\n\t}\r\n\r\n\tstatic uniqueArray(sourceArray)\r\n\t{\r\n\t\tlet resultArray = [], hash = {};\r\n\t\tfor (let i = 0, elem, l = sourceArray.length; i < l && (elem = sourceArray[i]) !== null; i++)\r\n\t\t{\r\n\t\t\tif (!hash[elem])\r\n\t\t\t{\r\n\t\t\t\tresultArray.push(elem);\r\n\t\t\t\thash[elem] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn resultArray;\r\n\t}\r\n\r\n\t//Extend on/off methods\r\n\tstatic extendOnOff(el)\r\n\t{\r\n\t\tif (el.length === 0)\r\n\t\t\treturn null;\r\n\t\tlet events = {\r\n\t\t\ton: function (event, callback, opts) {\r\n\t\t\t\tif (!this.namespaces) // save the namespaces on the DOM element itself\r\n\t\t\t\t\tthis.namespaces = {};\r\n\r\n\t\t\t\tthis.namespaces[event] = callback;\r\n\t\t\t\tlet options = opts || false;\r\n\r\n\t\t\t\tthis.addEventListener(event.split('.')[0], callback, options);\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\toff: function (event) {\r\n\t\t\t\tthis.removeEventListener(event.split('.')[0], this.namespaces[event]);\r\n\t\t\t\tdelete this.namespaces[event];\r\n\t\t\t\treturn this;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Extend the DOM with these above custom methods\r\n\t\tif (!el.isExtendOnOff)\r\n\t\t{\r\n\t\t\tel.on = Element.prototype.on = events.on;\r\n\t\t\tel.off = Element.prototype.off = events.off;\r\n\t\t\tel.isExtendOnOff = true;\r\n\t\t}\r\n\t\treturn el;\r\n\t}\r\n\r\n\tstatic getElements(elements)\r\n\t{\r\n\t\tlet resultElement = [];\r\n\t\tif (elements === undefined || elements === null)\r\n\t\t{\r\n\t\t\tresultElement = [];\r\n\t\t}\r\n\t\telse if (elements.jquery)\r\n\t\t{\r\n\t\t\tresultElement = elements.length > 1 ? elements.get() : [elements[0]];\r\n\t\t}\r\n\t\telse if (elements instanceof window.NodeList || elements instanceof NodeList || elements instanceof HTMLCollection)\r\n\t\t{\r\n\t\t\tresultElement = Array.prototype.slice.call(elements);\r\n\t\t}\r\n\t\telse if (Array.isArray(elements))\r\n\t\t{\r\n\t\t\tresultElement = elements.filter(function (element) {\r\n\t\t\t\treturn element.nodeType === 1 || element.jquery;\r\n\t\t\t});\r\n\t\t}\r\n\t\telse if (elements.nodeType === 1)\r\n\t\t{\r\n\t\t\tresultElement = [elements];\r\n\t\t}\r\n\t\telse if (typeof elements === 'string')\r\n\t\t{\r\n\t\t\tresultElement = document.querySelectorAll(elements);\r\n\t\t}\r\n\t\treturn resultElement;\r\n\t}\r\n\r\n\tstatic getUrlQueryParams(url)\r\n\t{\r\n\t\tlet query = {},\r\n\t\t\t\tsearchStr = url ? (url.indexOf('?') !== -1 ? url.split('?')[1] : '') : window.location.search.substring(1),\r\n\t\t\t\tqueryParams = searchStr.split(\"&\");\r\n\t\tfor (let i = 0; i < queryParams.length; i++)\r\n\t\t{\r\n\t\t\tlet queryParam = queryParams[i].split(\"=\");\r\n\t\t\tif (queryParam.length > 1)\r\n\t\t\t{\r\n\t\t\t\tquery[queryParam[0]] = queryParam[1];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn query;\r\n\t}\r\n\r\n\tstatic getCurrentScriptSrc()\r\n\t{\r\n\t\tlet scripts = document.getElementsByTagName(\"script\");\r\n\t\treturn (document.currentScript || scripts[scripts.length - 1]).src;\r\n\t}\r\n}\r\n\r\nclass PopupDismiss {\r\n\tconstructor(elements, isDelegated = false)\r\n\t{\r\n\t\tthis.name = 'popupDismiss';\r\n\t\tthis.isTap = undefined;\r\n\t\tthis.attr = {\r\n\t\t\tdataToggle: 'data-toggle',\r\n\t\t\tdataTarget: 'data-target',\r\n\t\t\tdataDismissScope: 'data-dismiss-scope',\r\n\t\t\tdataToggleClass: 'data-toggle-class',\r\n\t\t\tdataPopupHandler: 'data-popup-handler',\r\n\t\t\tdataDismissHandler: 'data-dismiss-handler',\r\n\t\t\tdataIsPopup: 'data-isPopup',\r\n\t\t\tdataPopupDismiss: 'data-popup-dismiss',\r\n\t\t};\r\n\t\tthis.popupEvent = this.popupEvent.bind(this);\r\n\r\n\t\tif (elements === undefined)\r\n\t\t{\r\n\t\t\tthis.initDelegate(document.body);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.elements = Util.getElements(elements);\r\n\t\t\tthis.isDelegated = isDelegated || (elements === undefined);\r\n\r\n\t\t\tthis.init = this.isDelegated ? this.initDelegate : this.initElement;\r\n\t\t\tthis.elements.forEach(element => this.init(element));\r\n\t\t}\r\n\t}\r\n\r\n\tinitElement(element)\r\n\t{\r\n\t\tif (element.getAttribute(this.attr.dataToggle) === this.name && element.getAttribute(`data-${this.name}`) !== this.name)\r\n\t\t{\r\n\t\t\telement.setAttribute(`data-${this.name}`, this.name);\r\n\t\t\telement.addEventListener(\"click\", this.popupEvent);\r\n\t\t}\r\n\t}\r\n\r\n\tinitDelegate(element)\r\n\t{\r\n\t\tthis.delegate(element, 'click', `[${this.attr.dataToggle}=\"${this.name}\"]`, this.popupEvent);\r\n\t}\r\n\r\n\tdelegate(element, eventName, selector, handler)\r\n\t{\r\n\t\telement.addEventListener(eventName, (event) => {\r\n\t\t\tlet target = event.target,\r\n\t\t\t\t\tpopupDismissElement = null;\r\n\t\t\tif (target.getAttribute(this.attr.dataToggle) === this.name)\r\n\t\t\t{\r\n\t\t\t\tpopupDismissElement = target;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tpopupDismissElement = Util.findParent(target, selector);\r\n\t\t\t}\r\n\t\t\tpopupDismissElement && handler.call(popupDismissElement, event);\r\n\t\t});\r\n\t}\r\n\r\n\tpopupTarget(dataTarget, triggerElement)\r\n\t{\r\n\t\tlet targetElement = null,\r\n\t\t\t\tparentParam = 'parent ';\r\n\t\tif (dataTarget.indexOf(parentParam) === 0)\r\n\t\t{\r\n\t\t\ttargetElement = triggerElement.parentNode.querySelector(dataTarget.split(parentParam.trim())[1]);\r\n\t\t\tif (dataTarget.split(parentParam)[1].indexOf(parentParam) === 0)\r\n\t\t\t{\r\n\t\t\t\ttargetElement = this.popupTarget(dataTarget.split(parentParam)[1], triggerElement);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttargetElement = document.querySelector(dataTarget);\r\n\t\t}\r\n\t\treturn targetElement;\r\n\t}\r\n\r\n\tpopupEvent(event)\r\n\t{\r\n\t\tlet popupTrigger = event.target,\r\n\t\t\t\tthat = this;\r\n\t\tif (popupTrigger.getAttribute(this.attr.dataToggle) !== this.name)\r\n\t\t{\r\n\t\t\tpopupTrigger = Util.findParent(popupTrigger, `[${this.attr.dataToggle}=\"${this.name}\"]`);\r\n\t\t}\r\n\t\tlet dataDismissScope = popupTrigger.getAttribute(this.attr.dataDismissScope),\r\n\t\t\t\tdismissScopes = Util.getSelectorsElements(dataDismissScope),\r\n\t\t\t\teventData = {\r\n\t\t\t\t\ttype: event.type,\r\n\t\t\t\t\tnamespace: popupTrigger.getAttribute(this.attr.dataTarget) + '-' + new Date().getTime(),\r\n\t\t\t\t\tpopupTrigger: popupTrigger,\r\n\t\t\t\t\tpopupTarget: this.popupTarget(popupTrigger.getAttribute(this.attr.dataTarget), popupTrigger),\r\n\t\t\t\t\ttoggledClass: popupTrigger.getAttribute(this.attr.dataToggleClass) || null, // Recommend: 'open'\r\n\t\t\t\t\tpopupHandler: popupTrigger.getAttribute(this.attr.dataPopupHandler) || null,\r\n\t\t\t\t\tdismissHandler: popupTrigger.getAttribute(this.attr.dataDismissHandler) || null,\r\n\t\t\t\t\tdismissScopes: dismissScopes\r\n\t\t\t\t};\r\n\r\n\t\tif (eventData.popupTarget.getAttribute(this.attr.dataIsPopup) !== 'true')\r\n\t\t{\r\n\t\t\tthis.monitorTap();\r\n\t\t\tif (eventData.toggledClass)\r\n\t\t\t{\r\n\t\t\t\tUtil.addClass(eventData.popupTrigger, eventData.toggledClass);\r\n\t\t\t\tUtil.addClass(eventData.popupTarget, eventData.toggledClass);\r\n\t\t\t}\r\n\t\t\teventData.popupTarget.setAttribute(this.attr.dataIsPopup, 'true');\r\n\t\t\teventData.dismissScopes.forEach((scope) => {\r\n\t\t\t\tUtil.extendOnOff(scope)\r\n\t\t\t\t\t\t.on(`${eventData.type}.${eventData.namespace}`, (newEvent) => {\r\n\t\t\t\t\t\t\tif (event === newEvent)\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\tlet newEventData = {\r\n\t\t\t\t\t\t\t\ttype: eventData.type,\r\n\t\t\t\t\t\t\t\tnamespace: eventData.namespace,\r\n\t\t\t\t\t\t\t\tdismissTrigger: newEvent.target,\r\n\t\t\t\t\t\t\t\tpopupTrigger: eventData.popupTrigger,\r\n\t\t\t\t\t\t\t\tpopupTarget: eventData.popupTarget,\r\n\t\t\t\t\t\t\t\ttoggledClass: eventData.toggledClass,\r\n\t\t\t\t\t\t\t\tdismissHandler: eventData.dismissHandler,\r\n\t\t\t\t\t\t\t\tdismissScopes: eventData.dismissScopes\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tthat.dismiss(newEventData, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t\teventData.popupHandler !== null && window[eventData.popupHandler](eventData.popupTarget);\r\n\t\t\tPopupDismiss.setBodyCursorInIOS(\"pointer\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\teventData.dismissTrigger = popupTrigger;\r\n\t\t\tthat.dismiss(eventData);\r\n\t\t}\r\n\t}\r\n\r\n\tdismiss(eventData, isTrigger)\r\n\t{\r\n\t\tif (this.isTap === false)\r\n\t\t\treturn;\r\n\r\n\t\tif (!isTrigger ||\r\n\t\t\t\t(!Util.hasClosest(eventData.dismissTrigger, eventData.popupTrigger)\r\n\t\t\t\t\t\t&& this.isDismissTrigger(eventData.dismissTrigger, eventData.popupTarget)\r\n\t\t\t\t\t\t&& eventData.popupTarget.getAttribute(this.attr.dataIsPopup) === 'true'\r\n\t\t\t\t)\r\n\t\t)\r\n\t\t{\r\n\t\t\tif (eventData.toggledClass)\r\n\t\t\t{\r\n\t\t\t\tUtil.removeClass(eventData.popupTrigger, eventData.toggledClass);\r\n\t\t\t\tUtil.removeClass(eventData.popupTarget, eventData.toggledClass);\r\n\t\t\t}\r\n\t\t\teventData.popupTarget.setAttribute(this.attr.dataIsPopup, 'false');\r\n\t\t\teventData.dismissScopes.forEach((scope) => {\r\n\t\t\t\tscope.off(`${eventData.type}.${eventData.namespace}`, () => this.dismiss(eventData, true));\r\n\t\t\t});\r\n\t\t\teventData.dismissHandler !== null && window[eventData.dismissHandler](eventData.popupTarget);\r\n\r\n\t\t\tPopupDismiss.setBodyCursorInIOS(\"default\");\r\n\t\t}\r\n\t}\r\n\r\n\tmonitorTap()\r\n\t{\r\n\t\tlet that = this,\r\n\t\t\t\tstart = {},\r\n\t\t\t\tend = {};\r\n\t\tthis.isTap = undefined;\r\n\r\n\t\tdocument.body.addEventListener('mousedown', mouseDown);\r\n\t\tdocument.body.addEventListener('mouseup', mouseUp);\r\n\r\n\t\tfunction mouseDown(event)\r\n\t\t{\r\n\t\t\tthat.isTap = false;\r\n\t\t\tstart.x = event.pageX;\r\n\t\t\tstart.y = event.pageY;\r\n\t\t}\r\n\r\n\t\tfunction mouseUp(event)\r\n\t\t{\r\n\t\t\tend.x = event.pageX;\r\n\t\t\tend.y = event.pageY;\r\n\r\n\t\t\tif (Math.abs(end.x - start.x) < 5 && Math.abs(end.y - start.y) < 5)\r\n\t\t\t{\r\n\t\t\t\tthat.isTap = true;\r\n\t\t\t\tdocument.body.removeEventListener('mousedown', mouseDown);\r\n\t\t\t\tdocument.body.removeEventListener('mouseup', mouseUp);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Default: all be dismiss trigger(return true);\r\n\t// Check click point ($child) has '[data-popup-dismiss=\"false\"]'('[data-popup-dismiss=\"true\"]') or not;\r\n\tisDismissTrigger(child, parent)\r\n\t{\r\n\t\tif (Util.hasClosest(child, parent))\r\n\t\t{\r\n\t\t\tlet dataPopupDismiss = child.getAttribute(this.attr.dataPopupDismiss),\r\n\t\t\t\t\tparentDismissFalse;\r\n\t\t\tif (dataPopupDismiss === 'false' || dataPopupDismiss === 'true')\r\n\t\t\t{\r\n\t\t\t\treturn dataPopupDismiss === 'true';\r\n\t\t\t}\r\n\t\t\telse if (parentDismissFalse = Util.findParent(child, `[${this.attr.dataPopupDismiss}=\"false\"]`))\r\n\t\t\t{\r\n\t\t\t\tlet parentDismissTrue = Util.findParent(child, `[${this.attr.dataPopupDismiss}=\"true\"]`);\r\n\t\t\t\treturn parentDismissTrue ? Util.hasClosest(parentDismissTrue, parentDismissFalse) : false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Fix issue : In iOS device, the dismiss function could not be triggered;\r\n\tstatic setBodyCursorInIOS(val)\r\n\t{\r\n\t\tif (/iPhone|iPad|iPod/i.test(navigator.userAgent))\r\n\t\t{\r\n\t\t\tlet body = document.querySelector('body'),\r\n\t\t\t\t\tpopupCount = parseInt(body.getAttribute('popup-count') || '0', 10);\r\n\t\t\tif (val === 'pointer')\r\n\t\t\t{\r\n\t\t\t\t++popupCount === 1 && (body.style.cursor = val);\r\n\t\t\t}\r\n\t\t\telse if (val === 'default')\r\n\t\t\t{\r\n\t\t\t\t--popupCount && (body.style.cursor = val);\r\n\t\t\t}\r\n\t\t\tbody.setAttribute('popup-count', popupCount.toString());\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Auto init plugin if plugin.js?init=auto\r\n */\r\n(function () {\r\n\tlet scriptParamInit = Util.getUrlQueryParams(Util.getCurrentScriptSrc())['init'],\r\n\t\t\tinitPopupDismiss = () => new PopupDismiss();\r\n\tif (scriptParamInit === 'auto')\r\n\t{\r\n\t\tif (document.readyState !== \"complete\")\r\n\t\t{\r\n\t\t\twindow.addEventListener('DOMContentLoaded', initPopupDismiss);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tinitPopupDismiss();\r\n\t\t}\r\n\t}\r\n})();\r\n\r\nexport default PopupDismiss"],"sourceRoot":""}