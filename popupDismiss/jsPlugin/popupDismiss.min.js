var PopupDismiss=function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}
/**!
 * Javascript plugin: popupDismiss v5.0.20181105
 *
 */var a=function(){function t(){r(this,t)}return i(t,null,[{key:"addClass",value:function(t,e){t.classList?t.classList.add(e):t.className+=" "+e}},{key:"removeClass",value:function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}},{key:"findParent",value:function(t,e){for(var s=function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)};(t=t.parentElement)&&!s(t,e););return t}},{key:"hasClosest",value:function(t,e){if(t===e)return!0;if(void 0===e)return!1;for(var s=[],i=t.parentNode;i!==e&&i.parentNode;){var r=i;s.push(r),i=r.parentNode}return i===e}},{key:"getSelectorsElements",value:function(e){if(!e||e&&""===e.trim())return[document];for(var s=[],i=e.split(",").map(function(t){return t.trim()}),r=0,a=(i=t.uniqueArray(i)).length;r<a;r++)if("document"===i[r])s.push(document);else{var n=[].slice.call(document.querySelectorAll(i[r]));s=s.concat(n)}return s}},{key:"uniqueArray",value:function(t){for(var e,s=[],i={},r=0,a=t.length;r<a&&null!==(e=t[r]);r++)i[e]||(s.push(e),i[e]=!0);return s}},{key:"extendOnOff",value:function(t){if(0===t.length)return null;var e=function(t,e,s){this.namespaces||(this.namespaces={}),this.namespaces[t]=e;var i=s||!1;return this.addEventListener(t.split(".")[0],e,i),this},s=function(t){return this.removeEventListener(t.split(".")[0],this.namespaces[t]),delete this.namespaces[t],this};return t.isExtendOnOff||(t.on=Element.prototype.on=e,t.off=Element.prototype.off=s,t.isExtendOnOff=!0),t}},{key:"getElements",value:function(t){var e=[];return null==t?e=[]:t.jquery?e=t.length>1?t.get():[t[0]]:t instanceof window.NodeList||t instanceof NodeList||t instanceof HTMLCollection?e=Array.prototype.slice.call(t):Array.isArray(t)?e=t.filter(function(t){return 1===t.nodeType||t.jquery}):1===t.nodeType?e=[t]:"string"==typeof t&&(e=document.querySelectorAll(t)),e}},{key:"getUrlQueryParams",value:function(t){for(var e={},s=(t?-1!==t.indexOf("?")?t.split("?")[1]:"":window.location.search.substring(1)).split("&"),i=0;i<s.length;i++){var r=s[i].split("=");r.length>1&&(e[r[0]]=r[1])}return e}},{key:"getCurrentScript",value:function(t){var e=document.getElementsByTagName("script");if(!t)return document.currentScript?document.currentScript:e[e.length-1];for(var s=0;s<e.length;s++){var i=e.item(s);if(i.src&&i.src.match(t))return i}return null}}]),t}(),n=function(){function t(e){var s=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r(this,t),this.name="popupDismiss",this.isTap=void 0,this.attr={dataToggle:"data-toggle",dataTarget:"data-target",dataDismissScope:"data-dismiss-scope",dataToggleClass:"data-toggle-class",dataPopupHandler:"data-popup-handler",dataDismissHandler:"data-dismiss-handler",dataIsPopup:"data-isPopup",dataPopupDismiss:"data-popup-dismiss"},this.popupEvent=this.popupEvent.bind(this),void 0===e?this.initDelegate(document.body):(this.elements=a.getElements(e),this.isDelegated=i||void 0===e,this.init=this.isDelegated?this.initDelegate:this.initElement,this.elements.forEach(function(t){return s.init(t)}))}return i(t,[{key:"initElement",value:function(t){t.getAttribute(this.attr.dataToggle)===this.name&&t.getAttribute("data-"+this.name)!==this.name&&(t.setAttribute("data-"+this.name,this.name),t.addEventListener("click",this.popupEvent))}},{key:"initDelegate",value:function(t){this.delegate(t,"click","["+this.attr.dataToggle+'="'+this.name+'"]',this.popupEvent)}},{key:"delegate",value:function(t,e,s,i){var r=this;t.addEventListener(e,function(t){var e=t.target,n=null;(n=e.getAttribute(r.attr.dataToggle)===r.name?e:a.findParent(e,s))&&i.call(n,t)})}},{key:"popupTarget",value:function(t,e){var s=null;return 0===t.indexOf("parent ")?(s=e.parentNode.querySelector(t.split("parent ".trim())[1]),0===t.split("parent ")[1].indexOf("parent ")&&(s=this.popupTarget(t.split("parent ")[1],e))):s=document.querySelector(t),s}},{key:"popupEvent",value:function(e){var s=e.target,i=this;s.getAttribute(this.attr.dataToggle)!==this.name&&(s=a.findParent(s,"["+this.attr.dataToggle+'="'+this.name+'"]'));var r=s.getAttribute(this.attr.dataDismissScope),n=a.getSelectorsElements(r),o={type:e.type,namespace:s.getAttribute(this.attr.dataTarget)+"-"+(new Date).getTime(),popupTrigger:s,popupTarget:this.popupTarget(s.getAttribute(this.attr.dataTarget),s),toggledClass:s.getAttribute(this.attr.dataToggleClass)||null,popupHandler:s.getAttribute(this.attr.dataPopupHandler)||null,dismissHandler:s.getAttribute(this.attr.dataDismissHandler)||null,dismissScopes:n};"true"!==o.popupTarget.getAttribute(this.attr.dataIsPopup)?(this.monitorTap(),o.toggledClass&&(a.addClass(o.popupTrigger,o.toggledClass),a.addClass(o.popupTarget,o.toggledClass)),o.popupTarget.setAttribute(this.attr.dataIsPopup,"true"),o.dismissScopes.forEach(function(t){a.extendOnOff(t).on(o.type+"."+o.namespace,function(t){if(e!==t){var s={type:o.type,namespace:o.namespace,dismissTrigger:t.target,popupTrigger:o.popupTrigger,popupTarget:o.popupTarget,toggledClass:o.toggledClass,dismissHandler:o.dismissHandler,dismissScopes:o.dismissScopes};i.dismiss(s,!0)}})}),null!==o.popupHandler&&window[o.popupHandler](o.popupTarget),t.setBodyCursorInIOS("pointer")):(o.dismissTrigger=s,i.dismiss(o))}},{key:"dismiss",value:function(e,s){var i=this;!1!==this.isTap&&(!s||!a.hasClosest(e.dismissTrigger,e.popupTrigger)&&this.isDismissTrigger(e.dismissTrigger,e.popupTarget)&&"true"===e.popupTarget.getAttribute(this.attr.dataIsPopup))&&(e.toggledClass&&(a.removeClass(e.popupTrigger,e.toggledClass),a.removeClass(e.popupTarget,e.toggledClass)),e.popupTarget.setAttribute(this.attr.dataIsPopup,"false"),e.dismissScopes.forEach(function(t){t.off(e.type+"."+e.namespace,function(){return i.dismiss(e,!0)})}),null!==e.dismissHandler&&window[e.dismissHandler](e.popupTarget),t.setBodyCursorInIOS("default"))}},{key:"monitorTap",value:function(){var t=this,e={},s={};function i(s){t.isTap=!1,e.x=s.pageX,e.y=s.pageY}this.isTap=void 0,document.body.addEventListener("mousedown",i),document.body.addEventListener("mouseup",function r(a){s.x=a.pageX;s.y=a.pageY;Math.abs(s.x-e.x)<5&&Math.abs(s.y-e.y)<5&&(t.isTap=!0,document.body.removeEventListener("mousedown",i),document.body.removeEventListener("mouseup",r))})}},{key:"isDismissTrigger",value:function(t,e){if(a.hasClosest(t,e)){var s=t.getAttribute(this.attr.dataPopupDismiss),i=void 0;if("false"===s||"true"===s)return"true"===s;if(i=a.findParent(t,"["+this.attr.dataPopupDismiss+'="false"]')){var r=a.findParent(t,"["+this.attr.dataPopupDismiss+'="true"]');return!!r&&a.hasClosest(r,i)}}return!0}}],[{key:"setBodyCursorInIOS",value:function(t){if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){var e=document.querySelector("body"),s=parseInt(e.getAttribute("popup-count")||"0",10);"pointer"===t?1==++s&&(e.style.cursor=t):"default"===t&&--s&&(e.style.cursor=t),e.setAttribute("popup-count",s.toString())}}}]),t}();!function(){var t=a.getCurrentScript("popupDismiss");if(t){var e=function(){return new n};"auto"===a.getUrlQueryParams(t.src).init&&("complete"!==document.readyState?document.addEventListener("DOMContentLoaded",e):e())}else console.log('PopupDismiss initialized failed if you import with "popupDismiss.min.js?init=auto"!')}(),e.default=n,t.exports=e.default}]);
//# sourceMappingURL=popupDismiss.min.js.map