var PopupDismiss=function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=1)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}();function i(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cache={},this._unread={}}return n(e,[{key:"on",value:function(e,t){var s=this;if(this._cache[e]||(this._cache[e]=[]),"function"==typeof t){this._cache[e].push(t);var n=this._unread[e];n&&(n.forEach(function(t){s.trigger.apply(s,[e].concat(i(t)))}),this._unread[e]=[],delete this._unread[e])}else alert("Your listen on "+t.toString()+" is not one valid function!");return this}},{key:"off",value:function(e,t){var s=this._cache[e];return s&&this._cache[e].splice(s.indexOf(t),1),t||delete this._cache[e],this}},{key:"trigger",value:function(e){var t=this;[].shift.call(arguments);var s=[].slice.call(arguments),n=this._cache[e];return n?n.forEach(function(e){e.call.apply(e,[t].concat(i(s)))}):(this._unread[e]||(this._unread[e]=[]),this._unread[e].push(arguments)),this}},{key:"destroy",value:function(){var e=this;Object.keys(this._cache).forEach(function(t){return delete e._cache[t]}),Object.keys(this._unread).forEach(function(t){return delete e._unread[t]})}}]),e}();t.default=r,e.exports=t.default},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}(),r=s(0),a=(n=r)&&n.__esModule?n:{default:n};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}
/**!
 * Javascript plugin: popupDismiss v5.5.0.20181211
 */var u=function(){function e(){o(this,e)}return i(e,null,[{key:"addClass",value:function(e,t){e.classList?e.classList.add(t):e.className+=" "+t}},{key:"removeClass",value:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ")}},{key:"findParent",value:function(e,t){for(var s=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)};(e=e.parentElement)&&!s(e,t););return e}},{key:"hasClosest",value:function(e,t){if(e===t)return!0;if(void 0===t)return!1;for(var s=[],n=e.parentNode;n!==t&&n.parentNode;){var i=n;s.push(i),n=i.parentNode}return n===t}},{key:"getSelectorsElements",value:function(t){if(!t||t&&""===t.trim())return[document];for(var s=[],n=t.split(",").map(function(e){return e.trim()}),i=0,r=(n=e.uniqueArray(n)).length;i<r;i++)if("document"===n[i])s.push(document);else{var a=[].slice.call(document.querySelectorAll(n[i]));s=s.concat(a)}return s}},{key:"uniqueArray",value:function(e){for(var t,s=[],n={},i=0,r=e.length;i<r&&null!==(t=e[i]);i++)n[t]||(s.push(t),n[t]=!0);return s}},{key:"extendOnOff",value:function(e){if(0===e.length)return null;var t=function(e,t,s){this.namespaces||(this.namespaces={}),this.namespaces[e]=t;var n=s||!1;return this.addEventListener(e.split(".")[0],t,n),this},s=function(e){return this.removeEventListener(e.split(".")[0],this.namespaces[e]),delete this.namespaces[e],this};return e.isExtendOnOff||(e.on=Element.prototype.on=t,e.off=Element.prototype.off=s,e.isExtendOnOff=!0),e}},{key:"getElements",value:function(e){var t=[];return null==e?t=[]:e.jquery?t=e.length>1?e.get():[e[0]]:e instanceof window.NodeList||e instanceof NodeList||e instanceof HTMLCollection?t=Array.prototype.slice.call(e):Array.isArray(e)?t=e.filter(function(e){return 1===e.nodeType||e.jquery}):1===e.nodeType?t=[e]:"string"==typeof e&&(t=document.querySelectorAll(e)),t}},{key:"getUrlQueryParams",value:function(e){for(var t={},s=(e?-1!==e.indexOf("?")?e.split("?")[1]:"":window.location.search.substring(1)).split("&"),n=0;n<s.length;n++){var i=s[n].split("=");i.length>1&&(t[i[0]]=i[1])}return t}},{key:"getScriptByName",value:function(e){var t=document.getElementsByTagName("script");if(e)for(var s=0;s<t.length;s++){var n=t.item(s);if(n.src&&n.src.split("?")[0].match(e))return n}return null}}]),e}(),p=function(){function e(t){var s=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o(this,e),this.name="popupDismiss",this.isTap=void 0,this.isDelegated=n,this.attr={dataToggle:"data-toggle",dataTarget:"data-target",dataTargetParent:"data-target-parent",dataDismissScope:"data-dismiss-scope",dataToggleClass:"data-toggle-class",dataPopupHandler:"data-popup-handler",dataDismissHandler:"data-dismiss-handler",dataIsPopup:"data-isPopup",dataPopupDismiss:"data-popup-dismiss"},this.event=new a.default,this.popupEvent=this.popupEvent.bind(this),void 0===t?(this.isDelegated=!0,this.elements=[document.body]):this.elements=u.getElements(t),[].forEach.call(this.elements,function(e){return s.initElement(e)})}return i(e,[{key:"initElement",value:function(e){!this.isDelegated&&e.getAttribute(this.attr.dataToggle)!==this.name||e.getAttribute("data-"+this.name)===this.name||(e.setAttribute("data-"+this.name,this.name),e.addEventListener("click",this.popupEvent))}},{key:"popupTarget",value:function(e,t,s){var n=null;if(s){var i=u.findParent(t,s);i&&(n=i.querySelector(e))}else n=document.querySelector(e);return n}},{key:"popupEvent",value:function(t){var s=t.target,n=this;if(s.getAttribute(this.attr.dataToggle)!==this.name&&(s=u.findParent(s,"["+this.attr.dataToggle+'="'+this.name+'"]')),s){var i=s.getAttribute(this.attr.dataDismissScope),r=u.getSelectorsElements(i),a={type:t.type,namespace:s.getAttribute(this.attr.dataTarget)+"-"+(new Date).getTime(),popupTrigger:s,popupTarget:this.popupTarget(s.getAttribute(this.attr.dataTarget),s,s.getAttribute(this.attr.dataTargetParent)),toggledClass:s.getAttribute(this.attr.dataToggleClass)||null,popupHandler:s.getAttribute(this.attr.dataPopupHandler)||null,dismissHandler:s.getAttribute(this.attr.dataDismissHandler)||null,dismissScopes:r};if("true"!==a.popupTarget.getAttribute(this.attr.dataIsPopup)){this.monitorTap(),a.toggledClass&&(u.addClass(a.popupTrigger,a.toggledClass),u.addClass(a.popupTarget,a.toggledClass)),a.popupTarget.setAttribute(this.attr.dataIsPopup,"true"),a.dismissScopes.forEach(function(e){u.extendOnOff(e).on(a.type+"."+a.namespace,function(e){if(t!==e){var s={type:a.type,namespace:a.namespace,dismissTrigger:e.target,popupTrigger:a.popupTrigger,popupTarget:a.popupTarget,toggledClass:a.toggledClass,dismissHandler:a.dismissHandler,dismissScopes:a.dismissScopes};n.dismiss(s,!0)}})});var o=a.popupHandler;null!==o&&(o in window?window[o](a.popupTarget):this.event.trigger(o,a.popupTarget)),e.setBodyCursorInIOS("pointer")}else a.dismissTrigger=s,n.dismiss(a)}}},{key:"dismiss",value:function(t,s){var n=this;if(!1!==this.isTap&&(!s||!u.hasClosest(t.dismissTrigger,t.popupTrigger)&&this.isDismissTrigger(t.dismissTrigger,t.popupTarget)&&"true"===t.popupTarget.getAttribute(this.attr.dataIsPopup))){t.toggledClass&&(u.removeClass(t.popupTrigger,t.toggledClass),u.removeClass(t.popupTarget,t.toggledClass)),t.popupTarget.setAttribute(this.attr.dataIsPopup,"false"),t.dismissScopes.forEach(function(e){e.off(t.type+"."+t.namespace,function(){return n.dismiss(t,!0)})});var i=t.dismissHandler;null!==i&&(i in window?window[i](t.popupTarget):this.event.trigger(i,t.popupTarget)),e.setBodyCursorInIOS("default")}}},{key:"monitorTap",value:function(){var e=this,t={},s={};function n(s){e.isTap=!1,t.x=s.pageX,t.y=s.pageY}this.isTap=void 0,document.body.addEventListener("mousedown",n),document.body.addEventListener("mouseup",function i(r){s.x=r.pageX;s.y=r.pageY;Math.abs(s.x-t.x)<5&&Math.abs(s.y-t.y)<5&&(e.isTap=!0,document.body.removeEventListener("mousedown",n),document.body.removeEventListener("mouseup",i))})}},{key:"isDismissTrigger",value:function(e,t){if(u.hasClosest(e,t)){var s=e.getAttribute(this.attr.dataPopupDismiss),n=void 0;if("false"===s||"true"===s)return"true"===s;if(n=u.findParent(e,"["+this.attr.dataPopupDismiss+'="false"]')){var i=u.findParent(e,"["+this.attr.dataPopupDismiss+'="true"]');return!!i&&u.hasClosest(i,n)}}return!0}},{key:"on",value:function(e,t){this.event.on(e,t)}},{key:"off",value:function(e,t){this.event.off(e,t)}},{key:"destroy",value:function(){var e=this;[].forEach.call(this.elements,function(t){delete t["data-"+e.name],t.removeEventListener("click",e.popupEvent)}),this.event.destroy()}}],[{key:"setBodyCursorInIOS",value:function(e){if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){var t=document.querySelector("body"),s=parseInt(t.getAttribute("popup-count")||"0",10);"pointer"===e?1==++s&&(t.style.cursor=e):"default"===e&&--s&&(t.style.cursor=e),t.setAttribute("popup-count",s.toString())}}}]),e}();window.popupDismiss=function(e){return console.warn("popupDismiss.min.js: [Deprecation] popupDismiss() is deprecated. Please use new PopupDismiss(elements) instead."),new p(e)},window.popupDismissDelegate=function(e){return console.warn("popupDismiss.min.js: [Deprecation] popupDismissDelegate() is deprecated. Please use new PopupDismiss(elements, true) instead."),new p(e,!0)},function(){var e=u.getScriptByName("popupDismiss");if(e){var t=function(){return new p};"auto"===u.getUrlQueryParams(e.src).init&&("complete"!==document.readyState?document.addEventListener("DOMContentLoaded",t):t())}else console.warn('popupDismiss.min.js: [Notice] PopupDismiss auto-initialization failed with compatibility issue if import with "[url]?init=auto"!')}(),t.default=p,e.exports=t.default}]);
//# sourceMappingURL=popupDismiss.min.js.map