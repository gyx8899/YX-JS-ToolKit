var PopupDismiss=function(e){var t={};function s(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}
/**!
 * Javascript plugin: popupDismiss v5.3.1.20181110
 *
 */var n=function(){function e(){a(this,e)}return i(e,null,[{key:"addClass",value:function(e,t){e.classList?e.classList.add(t):e.className+=" "+t}},{key:"removeClass",value:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ")}},{key:"findParent",value:function(e,t){for(var s=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)};(e=e.parentElement)&&!s(e,t););return e}},{key:"hasClosest",value:function(e,t){if(e===t)return!0;if(void 0===t)return!1;for(var s=[],i=e.parentNode;i!==t&&i.parentNode;){var a=i;s.push(a),i=a.parentNode}return i===t}},{key:"getSelectorsElements",value:function(t){if(!t||t&&""===t.trim())return[document];for(var s=[],i=t.split(",").map(function(e){return e.trim()}),a=0,n=(i=e.uniqueArray(i)).length;a<n;a++)if("document"===i[a])s.push(document);else{var r=[].slice.call(document.querySelectorAll(i[a]));s=s.concat(r)}return s}},{key:"uniqueArray",value:function(e){for(var t,s=[],i={},a=0,n=e.length;a<n&&null!==(t=e[a]);a++)i[t]||(s.push(t),i[t]=!0);return s}},{key:"extendOnOff",value:function(e){if(0===e.length)return null;var t=function(e,t,s){this.namespaces||(this.namespaces={}),this.namespaces[e]=t;var i=s||!1;return this.addEventListener(e.split(".")[0],t,i),this},s=function(e){return this.removeEventListener(e.split(".")[0],this.namespaces[e]),delete this.namespaces[e],this};return e.isExtendOnOff||(e.on=Element.prototype.on=t,e.off=Element.prototype.off=s,e.isExtendOnOff=!0),e}},{key:"getElements",value:function(e){var t=[];return null==e?t=[]:e.jquery?t=e.length>1?e.get():[e[0]]:e instanceof window.NodeList||e instanceof NodeList||e instanceof HTMLCollection?t=Array.prototype.slice.call(e):Array.isArray(e)?t=e.filter(function(e){return 1===e.nodeType||e.jquery}):1===e.nodeType?t=[e]:"string"==typeof e&&(t=document.querySelectorAll(e)),t}},{key:"getUrlQueryParams",value:function(e){for(var t={},s=(e?-1!==e.indexOf("?")?e.split("?")[1]:"":window.location.search.substring(1)).split("&"),i=0;i<s.length;i++){var a=s[i].split("=");a.length>1&&(t[a[0]]=a[1])}return t}},{key:"getScriptByName",value:function(e){var t=document.getElementsByTagName("script");if(e)for(var s=0;s<t.length;s++){var i=t.item(s);if(i.src&&i.src.split("?")[0].match(e))return i}return null}}]),e}(),r=function(){function e(t){var s=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a(this,e),this.name="popupDismiss",this.isTap=void 0,this.attr={dataToggle:"data-toggle",dataTarget:"data-target",dataDismissScope:"data-dismiss-scope",dataToggleClass:"data-toggle-class",dataPopupHandler:"data-popup-handler",dataDismissHandler:"data-dismiss-handler",dataIsPopup:"data-isPopup",dataPopupDismiss:"data-popup-dismiss"},this.popupEvent=this.popupEvent.bind(this),void 0===t?this.initDelegate(document.body):(this.elements=n.getElements(t),this.isDelegated=i||void 0===t,this.init=this.isDelegated?this.initDelegate:this.initElement,[].slice.call(this.elements).forEach(function(e){return s.init(e)}))}return i(e,[{key:"initElement",value:function(e){e.getAttribute(this.attr.dataToggle)===this.name&&e.getAttribute("data-"+this.name)!==this.name&&(e.setAttribute("data-"+this.name,this.name),e.addEventListener("click",this.popupEvent))}},{key:"initDelegate",value:function(e){this.delegate(e,"click","["+this.attr.dataToggle+'="'+this.name+'"]',this.popupEvent)}},{key:"delegate",value:function(e,t,s,i){var a=this;e.addEventListener(t,function(e){var t=e.target,r=null;(r=t.getAttribute(a.attr.dataToggle)===a.name?t:n.findParent(t,s))&&i.call(r,e)})}},{key:"popupTarget",value:function(e,t){var s=null;if(0===e.indexOf("parent")){s=t.parentNode;var i=e.slice("parent".length).trim();i.length&&(s=0===i.indexOf("parent")?this.popupTarget(i,t):t.querySelector(i))}else s=document.querySelector(e);return s}},{key:"popupEvent",value:function(t){var s=t.target,i=this;s.getAttribute(this.attr.dataToggle)!==this.name&&(s=n.findParent(s,"["+this.attr.dataToggle+'="'+this.name+'"]'));var a=s.getAttribute(this.attr.dataDismissScope),r=n.getSelectorsElements(a),o={type:t.type,namespace:s.getAttribute(this.attr.dataTarget)+"-"+(new Date).getTime(),popupTrigger:s,popupTarget:this.popupTarget(s.getAttribute(this.attr.dataTarget),s),toggledClass:s.getAttribute(this.attr.dataToggleClass)||null,popupHandler:s.getAttribute(this.attr.dataPopupHandler)||null,dismissHandler:s.getAttribute(this.attr.dataDismissHandler)||null,dismissScopes:r};"true"!==o.popupTarget.getAttribute(this.attr.dataIsPopup)?(this.monitorTap(),o.toggledClass&&(n.addClass(o.popupTrigger,o.toggledClass),n.addClass(o.popupTarget,o.toggledClass)),o.popupTarget.setAttribute(this.attr.dataIsPopup,"true"),o.dismissScopes.forEach(function(e){n.extendOnOff(e).on(o.type+"."+o.namespace,function(e){if(t!==e){var s={type:o.type,namespace:o.namespace,dismissTrigger:e.target,popupTrigger:o.popupTrigger,popupTarget:o.popupTarget,toggledClass:o.toggledClass,dismissHandler:o.dismissHandler,dismissScopes:o.dismissScopes};i.dismiss(s,!0)}})}),null!==o.popupHandler&&window[o.popupHandler](o.popupTarget),e.setBodyCursorInIOS("pointer")):(o.dismissTrigger=s,i.dismiss(o))}},{key:"dismiss",value:function(t,s){var i=this;!1!==this.isTap&&(!s||!n.hasClosest(t.dismissTrigger,t.popupTrigger)&&this.isDismissTrigger(t.dismissTrigger,t.popupTarget)&&"true"===t.popupTarget.getAttribute(this.attr.dataIsPopup))&&(t.toggledClass&&(n.removeClass(t.popupTrigger,t.toggledClass),n.removeClass(t.popupTarget,t.toggledClass)),t.popupTarget.setAttribute(this.attr.dataIsPopup,"false"),t.dismissScopes.forEach(function(e){e.off(t.type+"."+t.namespace,function(){return i.dismiss(t,!0)})}),null!==t.dismissHandler&&window[t.dismissHandler](t.popupTarget),e.setBodyCursorInIOS("default"))}},{key:"monitorTap",value:function(){var e=this,t={},s={};function i(s){e.isTap=!1,t.x=s.pageX,t.y=s.pageY}this.isTap=void 0,document.body.addEventListener("mousedown",i),document.body.addEventListener("mouseup",function a(n){s.x=n.pageX;s.y=n.pageY;Math.abs(s.x-t.x)<5&&Math.abs(s.y-t.y)<5&&(e.isTap=!0,document.body.removeEventListener("mousedown",i),document.body.removeEventListener("mouseup",a))})}},{key:"isDismissTrigger",value:function(e,t){if(n.hasClosest(e,t)){var s=e.getAttribute(this.attr.dataPopupDismiss),i=void 0;if("false"===s||"true"===s)return"true"===s;if(i=n.findParent(e,"["+this.attr.dataPopupDismiss+'="false"]')){var a=n.findParent(e,"["+this.attr.dataPopupDismiss+'="true"]');return!!a&&n.hasClosest(a,i)}}return!0}}],[{key:"setBodyCursorInIOS",value:function(e){if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){var t=document.querySelector("body"),s=parseInt(t.getAttribute("popup-count")||"0",10);"pointer"===e?1==++s&&(t.style.cursor=e):"default"===e&&--s&&(t.style.cursor=e),t.setAttribute("popup-count",s.toString())}}}]),e}();window.popupDismiss=function(e){return console.warn("popupDismiss.min.js: [Deprecation] popupDismiss() is deprecated. Please use new PopupDismiss(elements) instead."),new r(e)},window.popupDismissDelegate=function(e){return console.warn("popupDismiss.min.js: [Deprecation] popupDismissDelegate() is deprecated. Please use new PopupDismiss(elements, true) instead."),new r(e,!0)},function(){var e=n.getScriptByName("popupDismiss");if(e){var t=function(){return new r};"auto"===n.getUrlQueryParams(e.src).init&&("complete"!==document.readyState?document.addEventListener("DOMContentLoaded",t):t())}else console.warn('popupDismiss.min.js: [Notice] PopupDismiss auto-initialization failed with compatibility issue if import with "[url]?init=auto"!')}(),t.default=r,e.exports=t.default}]);
//# sourceMappingURL=popupDismiss.min.js.map