<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<script src="//res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
</head>
<body>

<main>
	<wx-open-launch-weapp
	  id="launch-btn"
	  username="gh_662c5a02c18e"
	  path="pages/activity_invite/index.html?activityId=SX000012"
	>
	  <template>
		<style>.btn { padding: 12px }</style>
		<button class="btn">打开小程序</button>
	  </template>
	﻿</wx-open-launch-weapp>
	<script>
		var btn = document.getElementById('launch-btn');
		btn.addEventListener('launch', function (e) {
		   console.log('success');
			});
		   btn.addEventListener('error', function (e) {
		  console.log('fail', e.detail);
		   });
	</script>
</main>
	<script>
	var userAgent = window.navigator.userAgent.toLowerCase();
	var is_android = /(android)/.test(userAgent);
	var is_iphone = /(iphone|ios)/.test(userAgent);
	var is_mobile = is_android || is_iphone;
	var is_weixin_browser = /micromessenger/.test(userAgent);
	
	// 获取微信的版本号，如： 7.0.14
	let wechat = navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i)

	if (wechat) {
	  let judgewechat = wechat[1].split('.')

	  if (judgewechat[0] >= 7) {
		if (judgewechat[1] >= 0) {
		  if (judgewechat[2] >= 12) {
			// 微信版本是 7.0.12及以上
		  }
		}
	  }
	}
	</script>
	<script>
	wx.config({
	  debug:true,
	  appId:"wx8830763b00c18ac3",
	  timestamp:data.data.timestamp,
	  nonceStr:data.data.nonceStr,
	  signature:data.data.signature,
	  jsApiList:['onMenuShareWeibo],
	  openTagList: ['wx-open-launch-weapp']
	})
	/*
		wx.config({
		  debug: true,
		  beta: true,
		  appId: data.appid,
		  timestamp: data.timestamp,
		  nonceStr: data.noncestr,
		  signature: data.signature,
		  jsApiList: [''], // 备注：这里有一个坑，这项不能是 []，会不显按钮...
		  openTagList: ['wx-open-launch-weapp']
		})
		wx.ready(() => {
		  // 显示小程序跳转按钮
		  console.log('显示小程序跳转按钮 - Ready');
		})
		wx.error(function (res) {
		  // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名
		  console.log('error', res);
		});
		*/
	</script>
</body>
</html>
